<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/tw/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/tw/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/tw/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/tw/images/logo.svg" color="#222">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">

<link rel="stylesheet" href="/tw/css/main.css">


<link rel="stylesheet" href="/tw/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"oberonlai.blog","root":"/tw/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":true},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":true,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"disqus","storage":true,"lazyload":false,"nav":{"disqus":{"text":"Load Disqus","order":-1}},"activeClass":"disqus"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideDownIn","sidebar":"slideDownIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="WordPress å¤–æ›é–‹ç™¼ç³»åˆ—æ–‡ç›®éŒ„ä¸€ã€WordPress å¤–æ›æ¶æ§‹ - ç´€éŒ„æ›¾ç¶“ä½¿ç”¨éçš„æ¶æ§‹ä»¥åŠç›®å‰ä½œæ³•äºŒã€WordPress é–‹ç™¼å¯¦ç”¨ Composer å¥—ä»¶ - ä»‹ç´¹åœ¨å¯«å¤–æ›çš„æ™‚å€™å¯ä»¥åŠ é€Ÿé–‹ç™¼çš„å¥—ä»¶ä¸‰ã€è¼‰å…¥ä½ˆæ™¯ä¸»é¡Œç¯„æœ¬ - å¦‚ä½•åœ¨å¤–æ›è£¡é¢ä½¿ç”¨ç¯„æœ¬æª”ä¿®æ”¹å‰ç«¯ä»‹é¢ä¸¦æ•´åˆå‰ç«¯é–‹ç™¼æµç¨‹å››ã€æ•´åˆ PHPUnit å–®å…ƒæ¸¬è©¦ - é¿å…æ”¹æ±ç‰†å£è¥¿ç‰†çš„å•é¡Œå†æ¬¡ç™¼ç”Ÿäº”ã€è‡ªå‹•åŒ–éƒ¨ç½² - è®“ WordPress">
<meta property="og:type" content="article">
<meta property="og:title" content="ã€ å¿ƒå¾— ã€‘WordPress å¤–æ›é–‹ç™¼æ—¥è¨˜ (äºŒ) - å¥—ä»¶">
<meta property="og:url" content="https://oberonlai.blog/tw/wordpress-and-composer/">
<meta property="og:site_name" content="WordPress é–‹ç™¼æ—¥å¸¸">
<meta property="og:description" content="WordPress å¤–æ›é–‹ç™¼ç³»åˆ—æ–‡ç›®éŒ„ä¸€ã€WordPress å¤–æ›æ¶æ§‹ - ç´€éŒ„æ›¾ç¶“ä½¿ç”¨éçš„æ¶æ§‹ä»¥åŠç›®å‰ä½œæ³•äºŒã€WordPress é–‹ç™¼å¯¦ç”¨ Composer å¥—ä»¶ - ä»‹ç´¹åœ¨å¯«å¤–æ›çš„æ™‚å€™å¯ä»¥åŠ é€Ÿé–‹ç™¼çš„å¥—ä»¶ä¸‰ã€è¼‰å…¥ä½ˆæ™¯ä¸»é¡Œç¯„æœ¬ - å¦‚ä½•åœ¨å¤–æ›è£¡é¢ä½¿ç”¨ç¯„æœ¬æª”ä¿®æ”¹å‰ç«¯ä»‹é¢ä¸¦æ•´åˆå‰ç«¯é–‹ç™¼æµç¨‹å››ã€æ•´åˆ PHPUnit å–®å…ƒæ¸¬è©¦ - é¿å…æ”¹æ±ç‰†å£è¥¿ç‰†çš„å•é¡Œå†æ¬¡ç™¼ç”Ÿäº”ã€è‡ªå‹•åŒ–éƒ¨ç½² - è®“ WordPress">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="https://oberonlai.blog/wp-content/uploads/wordpress-and-composer/wordpress-and-composer-01.jpg">
<meta property="og:image" content="https://oberonlai.blog/wp-content/uploads/wordpress-and-composer/wordpress-and-composer-02.jpg">
<meta property="og:image" content="https://oberonlai.blog/wp-content/uploads/wordpress-and-composer/wordpress-and-composer-03.jpg">
<meta property="og:image" content="https://oberonlai.blog/wp-content/uploads/wordpress-and-composer/wordpress-and-composer-04.jpg">
<meta property="og:image" content="https://oberonlai.blog/wp-content/uploads/wordpress-and-composer/wordpress-and-composer-05.jpg">
<meta property="og:image" content="https://oberonlai.blog/wp-content/uploads/wordpress-and-composer/wordpress-and-composer-11.jpg">
<meta property="og:image" content="https://oberonlai.blog/wp-content/uploads/wordpress-and-composer/wordpress-and-composer-06.jpg">
<meta property="og:image" content="https://oberonlai.blog/wp-content/uploads/wordpress-and-composer/wordpress-and-composer-07.jpg">
<meta property="og:image" content="https://oberonlai.blog/wp-content/uploads/wordpress-and-composer/wordpress-and-composer-08.jpg">
<meta property="og:image" content="https://oberonlai.blog/wp-content/uploads/wordpress-and-composer/wordpress-and-composer-10.jpg">
<meta property="og:image" content="https://oberonlai.blog/wp-content/uploads/wordpress-and-composer/wordpress-and-composer-12.jpg">
<meta property="article:published_time" content="2021-07-26T04:30:00.000Z">
<meta property="article:modified_time" content="2021-07-26T05:04:59.456Z">
<meta property="article:author" content="è³´ä¿Šå¾ &#x2F; Oberon Lai">
<meta property="article:tag" content="composer">
<meta property="article:tag" content="customPostType">
<meta property="article:tag" content="metabox">
<meta property="article:tag" content="option">
<meta property="article:tag" content="asset">
<meta property="article:tag" content="ajax">
<meta property="article:tag" content="router">
<meta property="article:tag" content="packagist">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://oberonlai.blog/wp-content/uploads/wordpress-and-composer/wordpress-and-composer-01.jpg">

<link rel="canonical" href="https://oberonlai.blog/tw/wordpress-and-composer/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-TW'
  };
</script>

  <title>ã€ å¿ƒå¾— ã€‘WordPress å¤–æ›é–‹ç™¼æ—¥è¨˜ (äºŒ) - å¥—ä»¶ | WordPress é–‹ç™¼æ—¥å¸¸</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-163107142-1"></script>
    <script data-pjax>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-163107142-1');
      }
    </script>






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ›å°èˆªæ¬„">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta custom-logo">

    <a href="/tw/" class="brand" rel="start" style="display: block">
        <img class="logo-img" src="/tw/images/logo-w.svg" alt="WordPress é–‹ç™¼æ—¥å¸¸">
    </a>
      <p class="site-subtitle" itemprop="description">æœ‰ä»»ä½• WordPress å®¢è£½éœ€æ±‚æ­¡è¿èˆ‡æˆ‘è¯çµ¡ï¼</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-é—œæ–¼æˆ‘">

    <a href="/tw/about/" rel="section">é—œæ–¼æˆ‘</a>

  </li>
        <li class="menu-item menu-item-åˆä½œæ–¹å¼">

    <a href="/tw/how-can-oberon-help-you/" rel="section">åˆä½œæ–¹å¼</a>

  </li>
        <li class="menu-item menu-item-è¨ˆåƒ¹æ–¹å¼">

    <a href="/tw/how-do-i-make-a-quotation/" rel="section">è¨ˆåƒ¹æ–¹å¼</a>

  </li>
        <li class="menu-item menu-item-å­¸ç¿’-wordpress">

    <a href="/tw/wordpress-full-stack/" rel="section">å­¸ç¿’ WordPress</a>

  </li>
        <li class="menu-item menu-item-èˆ‡æˆ‘è¯ç¹«">

    <a href="mailto:m615926@gmail.com" rel="noopener" target="_blank">èˆ‡æˆ‘è¯ç¹«</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger">æœå°‹
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="æœå°‹..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/oberonlai" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="https://oberonlai.blog/tw/wordpress-and-composer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/tw/images/avatar.jpg">
      <meta itemprop="name" content="è³´ä¿Šå¾ / Oberon Lai">
      <meta itemprop="description" content="ç¾ç‚ºå…¨è· WordPress å·¥ç¨‹å¸«ï¼Œç¶²ç«™é–‹ç™¼ç¶“æ­· 11 å¹´ï¼Œå°ˆæ”»å‰ç«¯å·¥ç¨‹èˆ‡ WordPress ä½ˆæ™¯ä¸»é¡Œã€å¤–æ›å®¢è£½åŒ–é–‹ç™¼">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WordPress é–‹ç™¼æ—¥å¸¸">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          ã€ å¿ƒå¾— ã€‘WordPress å¤–æ›é–‹ç™¼æ—¥è¨˜ (äºŒ) - å¥—ä»¶
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">ç™¼è¡¨æ–¼</span>
              

              <time title="å‰µå»ºæ™‚é–“ï¼š2021-07-26 12:30:00 / ä¿®æ”¹æ™‚é–“ï¼š13:04:59" itemprop="dateCreated datePublished" datetime="2021-07-26T12:30:00+08:00">2021-07-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†é¡æ–¼</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/tw/categories/%E5%A4%96%E6%8E%9B%E9%96%8B%E7%99%BC/" itemprop="url" rel="index"><span itemprop="name">å¤–æ›é–‹ç™¼</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/tw/wordpress-and-composer/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="wordpress-and-composer/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
            <span class="post-meta-item" title="æ–‡ç« å­—æ•¸">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span>17k</span>
            </span>
            <span class="post-meta-item" title="æ‰€éœ€é–±è®€æ™‚é–“">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span>15 åˆ†é˜</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h3 id="WordPress-å¤–æ›é–‹ç™¼ç³»åˆ—æ–‡ç›®éŒ„"><a href="#WordPress-å¤–æ›é–‹ç™¼ç³»åˆ—æ–‡ç›®éŒ„" class="headerlink" title="WordPress å¤–æ›é–‹ç™¼ç³»åˆ—æ–‡ç›®éŒ„"></a>WordPress å¤–æ›é–‹ç™¼ç³»åˆ—æ–‡ç›®éŒ„</h3><p><a href="https://oberonlai.blog/tw/wordpress-plugin-boilerplate">ä¸€ã€WordPress å¤–æ›æ¶æ§‹ - ç´€éŒ„æ›¾ç¶“ä½¿ç”¨éçš„æ¶æ§‹ä»¥åŠç›®å‰ä½œæ³•</a><br><a href="https://oberonlai.blog/tw/wordpress-and-composer">äºŒã€WordPress é–‹ç™¼å¯¦ç”¨ Composer å¥—ä»¶ - ä»‹ç´¹åœ¨å¯«å¤–æ›çš„æ™‚å€™å¯ä»¥åŠ é€Ÿé–‹ç™¼çš„å¥—ä»¶</a><br>ä¸‰ã€è¼‰å…¥ä½ˆæ™¯ä¸»é¡Œç¯„æœ¬ - å¦‚ä½•åœ¨å¤–æ›è£¡é¢ä½¿ç”¨ç¯„æœ¬æª”ä¿®æ”¹å‰ç«¯ä»‹é¢ä¸¦æ•´åˆå‰ç«¯é–‹ç™¼æµç¨‹<br>å››ã€æ•´åˆ PHPUnit å–®å…ƒæ¸¬è©¦ - é¿å…æ”¹æ±ç‰†å£è¥¿ç‰†çš„å•é¡Œå†æ¬¡ç™¼ç”Ÿ<br>äº”ã€è‡ªå‹•åŒ–éƒ¨ç½² - è®“ WordPress æ­ä¸Š DevOps çš„åˆ—è»ŠğŸš„<br>å…­ã€WordPress å¤–æ›æ›´æ–° - è‡ªè¡Œç®¡ç†æœªä¸Šæ¶ wordpress.org çš„å¤–æ›ç‰ˆæœ¬ç¶­è­·</p>
<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>WP æœ€å¼·å¤§çš„éƒ¨åˆ†å°±æ˜¯æœ‰ç”¨ä¸å®Œçš„å¤–æ›ï¼ŒPHP ç•¶ç„¶ä¹Ÿæœ‰ï¼ä¸Š Packagist æˆ– Github æ‰“ WordPress é—œéµå­—å°±èƒ½æ‰¾åˆ°éå¸¸å¤šé©ç”¨æ–¼ WP é–‹ç™¼çš„å¥—ä»¶ï¼Œä»¥ä¸‹å°±å¹¾å¥—æˆ‘å·²ç¶“æ‹¿ä¾†å¯¦æˆ°çš„å¥—ä»¶åšä»‹ç´¹ï¼š</p>
<h2 id="posttypes"><a href="#posttypes" class="headerlink" title="posttypes"></a>posttypes</h2><p>åšå¤–æ›æœ€å¸¸è¦‹çš„éœ€æ±‚å°±æ˜¯è¦æ–°å¢ custom post typeã€custom taxonomyï¼Œæˆ–æ˜¯ä¿®æ”¹æ—¢æœ‰ post type çš„é¡¯ç¤ºåç¨±ä»¥åŠåŠŸèƒ½ä¿®æ”¹ï¼ŒWP åŸç”Ÿçš„æ–¹æ³•äº‹å¯¦ä¸Šä¸é›£ä½¿ç”¨ï¼Œåªè¦å‘¼å« register_post_type() æ›åœ¨ init å°±èƒ½è™•ç†ï¼Œ</p>
<p>ä½†éš¨è‘—å°ˆæ¡ˆçš„è¤‡é›œåº¦æé«˜ï¼Œé¡ä¼¼çš„ç¨‹å¼ç¢¼å°±éœ€è¦è¢«é‡è¤‡å¾ˆå¤šéï¼Œå†åŠ ä¸Šé‚„éœ€è¦è™•ç†å¾Œå° column çš„é¡¯ç¤ºæ¬„ä½ï¼Œæ–°å¢ä¸€å€‹ post type å°±æœƒè®“ç¨‹å¼ç¢¼è½è½é•·ï¼Œè¬ä¸€æœ‰å…©å€‹æˆ–æ›´å¤šå€‹ï¼Œç®¡ç†èµ·ä¾†å°±æœƒéº»ç…©è¨±å¤šã€‚</p>
<span id="more"></span>

<p>çˆ¬äº†ä¸€ä¸‹ Github å¾Œï¼Œç™¼ç¾ç”± Joe Grainger å¯«çš„ <a target="_blank" rel="noopener" href="https://github.com/jjgrainger/PostTypes">PostTypes</a> é€™å€‹å¥—ä»¶ï¼Œå®Œå®Œå…¨å…¨å¯ä»¥è§£æ±ºæˆ‘çš„å•é¡Œï¼Œå› ç‚ºä»–éƒ½å¹«æˆ‘å€‘æŠŠåŠŸèƒ½å°è£å¥½äº†ï¼Œåªè¦ new PostType(â€˜CPTâ€™) å°±å¯ä»¥æ–°å¢ï¼Œå®Œå…¨ä¸ç”¨å†å¯« Hookï¼Œä¸¦é€éè©²ç‰©ä»¶ä¾†å¯¦ä½œ Post Type çš„å„é …åƒæ•¸è¨­å®šï¼š</p>
<p>å…ˆä¾†ç§’å®‰è£ä¸€ä¸‹ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">$ composer require jjgrainger&#x2F;posttypes<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>æˆ‘çš„ç¿’æ…£æ˜¯æœƒåœ¨ src è³‡æ–™å¤¾åº•ä¸‹é–‹ä¸€å€‹èˆ‡ CPT slug åŒåçš„ php æª”ï¼Œç„¶å¾Œå› ç‚ºæˆ‘å€‘å·²ç¶“æœ‰è‡ªå‹•è¼‰å…¥äº†ï¼Œæ‰€ä»¥è¦ç”¨çš„è©±åªéœ€è¦å¯« use é—œéµå­—å³å¯ï¼Œå‡è¨­æˆ‘å€‘çš„éœ€æ±‚å¦‚ä¸‹ï¼š</p>
<ol>
<li>æ–°å¢ä¸€å€‹ Post Type å«åš book</li>
<li>æ–°å¢å…©å€‹ book çš„ Taxonomy å«åš travel è·Ÿ business</li>
</ol>
<h3 id="æ–°å¢-Custom-Post-Type"><a href="#æ–°å¢-Custom-Post-Type" class="headerlink" title="æ–°å¢ Custom Post Type"></a>æ–°å¢ Custom Post Type</h3><p>æ ¹æ“šè³‡æ–™çµæ§‹ï¼Œæˆ‘å€‘æœƒè™•ç†åˆ° wp_posts èˆ‡ wp_termsï¼Œæ‰€ä»¥è³‡æ–™å¤¾å…ˆæ–°å¢ posts èˆ‡ termsï¼Œç„¶å¾Œå»ºç«‹ç›¸å°æ‡‰çš„æª”æ¡ˆï¼Œæª”æ¡ˆçµæ§‹å¦‚ä¸‹ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">src
â”œâ”€â”€ posts
â”‚   â””â”€â”€ book
â”‚       â””â”€â”€ Book.php
â””â”€â”€ terms
    â”œâ”€â”€ business
    â”‚   â””â”€â”€ Business.php
    â””â”€â”€ travel
        â””â”€â”€ Travel.php<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æˆ‘è‡ªå·±å¸¸å¸¸æœƒè¢«è‹±æ–‡çš„å–®è¤‡æ•¸ææ··ï¼Œæ‰€ä»¥å¾Œä¾†å°±æ±ºå®šç¬¬ä¸€å±¤æ¯”ç…§è³‡æ–™è¡¨åç¨±ä¸€å¾‹ä½¿ç”¨è¤‡æ•¸ ( postsã€terms )ï¼Œæ–°å¢çš„å…§å®¹æˆ–æ˜¯åŠŸèƒ½ä¸€å¾‹éƒ½ä½¿ç”¨å–®æ•¸ï¼Œç„¶å¾Œæª”åé¦–å­—å‡å¤§å¯«ã€‚æ¥ä¸‹ä¾†å…ˆé–‹å•Ÿ Book.php ä¾†é€²è¡Œ Custom Post Type çš„è¨»å†Šï¼Œæˆ‘å€‘ä½¿ç”¨ posttypes å¥—ä»¶ä¾†è™•ç†ï¼š</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">use</span> <span class="token package">PostTypes<span class="token punctuation">\</span>PostType</span><span class="token punctuation">;</span>
<span class="token variable">$books</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PostType</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'book'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$books</span><span class="token operator">-></span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>å…©è¡Œå°±æå®šï¼ ğŸ˜</p>
<p><img src="https://oberonlai.blog/wp-content/uploads/wordpress-and-composer/wordpress-and-composer-01.jpg"></p>
<p>é è¨­åç¨±æˆ–æ˜¯ç”¨ CPT çš„åå­—åŠ ä¸Š s è¤‡æ•¸ï¼Œå¦‚æœè¦ä¿®æ”¹çš„è©±å¯ä»¥åœ¨å»ºç«‹ PostType å¯¦ä¾‹æ™‚å¸¶å…¥ name åƒæ•¸ä¾†é€²è¡Œä¿®æ”¹ï¼š</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">use</span> <span class="token package">PostTypes<span class="token punctuation">\</span>PostType</span><span class="token punctuation">;</span>

<span class="token variable">$name</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
	<span class="token string single-quoted-string">'name'</span>   <span class="token operator">=></span> <span class="token string single-quoted-string">'book'</span><span class="token punctuation">,</span>  <span class="token comment">// è¨»å†Š CPT çš„åç¨±</span>
	<span class="token string single-quoted-string">'plural'</span> <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'MyBook'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'btp'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// é¡¯ç¤ºåç¨±</span>
	<span class="token string single-quoted-string">'slug'</span>   <span class="token operator">=></span> <span class="token string single-quoted-string">'mybook'</span><span class="token punctuation">,</span> <span class="token comment">// ç¶²å€ä»£ç¨±</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$books</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PostType</span><span class="token punctuation">(</span> <span class="token variable">$name</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$books</span><span class="token operator">-></span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>çµæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://oberonlai.blog/wp-content/uploads/wordpress-and-composer/wordpress-and-composer-02.jpg"></p>
<p>å¦‚æœæƒ³è¦ä½¿ç”¨ register_post_type è£¡é¢çš„åƒæ•¸ï¼Œåªè¦å†å‚³å…¥ç¬¬äºŒå€‹ option åƒæ•¸å³å¯ï¼š</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php">
<span class="token keyword">use</span> <span class="token package">PostTypes<span class="token punctuation">\</span>PostType</span><span class="token punctuation">;</span>

<span class="token variable">$options</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
	<span class="token string single-quoted-string">'has_archive'</span> <span class="token operator">=></span> <span class="token constant boolean">true</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'menu_icon'</span>   <span class="token operator">=></span> <span class="token string single-quoted-string">'dashicons-book'</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'supports'</span>    <span class="token operator">=></span> <span class="token keyword">array</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'title'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'revisions'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'editor'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'author'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'comments'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'custom-fields'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$books</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PostType</span><span class="token punctuation">(</span> <span class="token variable">$name</span><span class="token punctuation">,</span> <span class="token variable">$options</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$books</span><span class="token operator">-></span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>å¦å¤–å¦‚æœæƒ³è¦ä¿®æ”¹æ¨™ç±¤åƒæ˜¯ Add Newã€Edit ç­‰ç­‰çš„å­—ä¸²ï¼Œåªè¦åœ¨ register å®Œæˆå¾ŒæŒ‡å®šå³å¯ï¼š</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token variable">$labels</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
    <span class="token string single-quoted-string">'all_items'</span>          <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'æ‰€æœ‰å¥½æ›¸'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'btp'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'add_new'</span>            <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'æ–°å¢å¥½æ›¸'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'btp'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'add_new_item'</span>       <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'æ–°å¢å¥½æ›¸'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'btp'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'edit_item'</span>          <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'ç·¨è¼¯'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'btp'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'new_item'</span>           <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'æ–°é …ç›®'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'btp'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'view_item'</span>          <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'æª¢è¦–'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'btp'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'view_items'</span>         <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'æª¢è¦–'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'btp'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'search_items'</span>       <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'æœå°‹'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'btp'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'not_found'</span>          <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'ç„¡çµæœ'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'btp'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'not_found_in_trash'</span> <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'ç„¡çµæœ'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'btp'</span> <span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$books</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PostType</span><span class="token punctuation">(</span> <span class="token variable">$name</span><span class="token punctuation">,</span> <span class="token variable">$options</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$books</span><span class="token operator">-></span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$books</span><span class="token operator">-></span><span class="token function">labels</span><span class="token punctuation">(</span> <span class="token variable">$labels</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="https://oberonlai.blog/wp-content/uploads/wordpress-and-composer/wordpress-and-composer-03.jpg"></p>
<p>Book.php å®Œæ•´ç¨‹å¼ç¢¼å¦‚ä¸‹ï¼š</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">use</span> <span class="token package">PostTypes<span class="token punctuation">\</span>PostType</span><span class="token punctuation">;</span>

<span class="token variable">$name</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
	<span class="token string single-quoted-string">'name'</span>   <span class="token operator">=></span> <span class="token string single-quoted-string">'book'</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'plural'</span> <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'MyBook'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'btp'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'slug'</span>   <span class="token operator">=></span> <span class="token string single-quoted-string">'mybook'</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$options</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
	<span class="token string single-quoted-string">'has_archive'</span> <span class="token operator">=></span> <span class="token constant boolean">true</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'menu_icon'</span>   <span class="token operator">=></span> <span class="token string single-quoted-string">'dashicons-book'</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'supports'</span>    <span class="token operator">=></span> <span class="token keyword">array</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'title'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'revisions'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'editor'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'author'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'comments'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'custom-fields'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$books</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PostType</span><span class="token punctuation">(</span> <span class="token variable">$name</span><span class="token punctuation">,</span> <span class="token variable">$options</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$books</span><span class="token operator">-></span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$labels</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
	<span class="token string single-quoted-string">'all_items'</span>          <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'æ‰€æœ‰å¥½æ›¸'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'btp'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'add_new'</span>            <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'æ–°å¢å¥½æ›¸'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'btp'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'add_new_item'</span>       <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'æ–°å¢'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'btp'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'edit_item'</span>          <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'ç·¨è¼¯'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'btp'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'new_item'</span>           <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'æ–°é …ç›®'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'btp'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'view_item'</span>          <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'æª¢è¦–'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'btp'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'view_items'</span>         <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'æª¢è¦–'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'btp'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'search_items'</span>       <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'æœå°‹'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'btp'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'not_found'</span>          <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'ç„¡çµæœ'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'btp'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'not_found_in_trash'</span> <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'ç„¡çµæœ'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'btp'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$books</span><span class="token operator">-></span><span class="token function">labels</span><span class="token punctuation">(</span> <span class="token variable">$labels</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ä¸Šé¢é€™æ®µå°±æ˜¯æˆ‘å¹³å¸¸åœ¨ç”¨çš„ç¨‹å¼ç¢¼ç‰‡æ®µã€‚</p>
<p>å¯èƒ½æœƒæœ‰æœ‹å‹å•é€™è·Ÿç›´æ¥å¯« register_post_type() æœ‰ä»€éº¼å·®åˆ¥ï¼Ÿå°±è¨­è¨ˆå…¸ç¯„ä¾†èªªé€™æ˜¯ç¨‹åºå¼ç¨‹å¼è¨­è¨ˆ ( Procedural Programming ) è·Ÿç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆ ( Object Oriented Programming ) çš„å·®åˆ¥ï¼ŒWordPress ä¸»è¦ä½¿ç”¨çš„é‚è¼¯æ˜¯å‰è€…ï¼Œè€Œä¸€äº› PHP æ¡†æ¶åƒæ˜¯ Laravel å°±æ˜¯ç‰©ä»¶å°å‘çš„æ–¹å¼ä¾†è¨­è¨ˆçš„ã€‚</p>
<p>ç¨‹åºå¼ç¨‹å¼è¨­è¨ˆé¡§åæ€ç¾©å°±æ˜¯æŒ‰ç…§ç¨‹å¼ç¢¼çš„é †åºä¾†åŸ·è¡Œï¼Œç„¶å¾Œé€éåˆ¤æ–·å¼ä¾†æ±ºå®šä¸‹ä¸€æ¢è·¯è©²æ€éº¼èµ°ï¼Œæœ‰é»åƒå°æ™‚å€™ç©çš„çˆ¬æ¢¯å­çš„éŠæˆ²ï¼Œé‡åˆ°æ©«ç·šå°±è¦è½‰å½ï¼Œæ²’æœ‰çš„è©±å°±ç›´ç›´å‰é€²ï¼Œåœ¨ WordPress ä¸­æœ€å¸¸è¦‹çš„ä¾‹å­å°±æ˜¯è¦å–å¾—æ–‡ç« åˆ—è¡¨æ™‚ä½¿ç”¨çš„è¿´åœˆå¯«æ³•ï¼š</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token function">have_posts</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span> <span class="token function">have_posts</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token function">the_post</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">the_content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>å…ˆæª¢æŸ¥ have_posts() æ˜¯å¦æœ‰å›å‚³æ±è¥¿ï¼Œæœ‰çš„è©±ç”¨ while è¿´åœˆå»æŠŠè£¡é¢çš„æ–‡ç« é¡¯ç¤ºå‡ºä¾†ï¼Œç›´åˆ°æ²’æœ‰ç‚ºæ­¢ï¼Œè¨»å†Š CPT ä¹Ÿæ˜¯æŒ‰ç…§ç¨‹å¼ç¢¼é †åºçš„é‚è¼¯ï¼Œå…ˆæŠŠåƒæ•¸å‚³åˆ° register_post_type é€™å€‹å‡½å¼è£¡é¢ï¼Œå†æŠŠé€™å€‹å‡½å¼å‚³åˆ° init çš„å‹¾é» ( Hook ) ä¸Šï¼š</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">function</span> <span class="token function">wpdocs_codex_custom_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token variable">$args</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
        <span class="token string single-quoted-string">'public'</span> <span class="token operator">=></span> <span class="token constant boolean">true</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'label'</span>  <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'Books'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'textdomain'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">register_post_type</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'book'</span><span class="token punctuation">,</span> <span class="token variable">$args</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token function">add_action</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'init'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'wpdocs_codex_custom_init'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>è€Œç‰©ä»¶å°å‘æ¯”è¼ƒåƒæ˜¯åœ¨ç©æ¨‚é«˜ï¼Œæ‰€æœ‰çš„ç©æœ¨éƒ½æœ‰è‡ªå·±çš„ç‰¹æ€§ï¼Œé€éçµ„åˆé€™äº›ç©æœ¨ä¾†åšæˆæˆå“ï¼ŒåŒæ™‚æ‹†æ‰å¾Œåˆèƒ½å†ç”¨ä¸€æ¨£çš„ç©æœ¨çµ„æˆä¸åŒçš„æ±è¥¿ï¼Œé€™å°±æ˜¯ç‰©ä»¶çš„æ ¸å¿ƒæ¦‚å¿µï¼Œä¹Ÿå°±æ˜¯åƒä¸Šé¢çš„ä¾‹å­ä¸€æ¨£ï¼Œæˆ‘ä½¿ç”¨äº† PostTypes\PostType é€™å¡Šç©æœ¨ä¾†å®Œæˆè¨»å†Š CPT çš„é€™å€‹æˆå“ï¼š</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">use</span> <span class="token package">PostTypes<span class="token punctuation">\</span>PostType</span><span class="token punctuation">;</span>
<span class="token variable">$books</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PostType</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'42115'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$books</span><span class="token operator">-></span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>è€Œ Packagist å°±æ˜¯å…¨ä¸–ç•Œæœ€å¤§çš„ç©æœ¨æ± ï¼Œæˆ‘å¯ä»¥åœ¨è£¡é¢æ’¿åˆ°å„å¼å„æ¨£æˆ‘éœ€è¦çš„ç£šï¼Œç„¶å¾Œæ‹¼æˆæˆ‘æƒ³è¦çš„ä½œå“ï¼Œæœ‰åˆ¥æ–¼ç¨‹åºå¼ç¨‹å¼è¨­è¨ˆï¼Œé€éç‰©ä»¶çš„ä»‹é¢æ›´æ–¹ä¾¿é‡è¤‡åˆ©ç”¨ï¼Œä¹Ÿèƒ½æ¸›å°‘æ‰¾ç›¸å°æ‡‰å‹¾é»çš„æ™‚é–“ã€‚</p>
<p>æ‰€ä»¥æˆ‘ç¾åœ¨åˆ»æ„ä½¿ç”¨é€™äº›å¥—ä»¶ä¾†å–ä»£ WP å…§å»ºçš„å‡½å¼ï¼Œè¦ºå¾—é€™æ¨£æ¯”è¼ƒå¥½ç†è§£ä¸¦ä¸”ç›¸å°ç°¡æ½”ï¼Œä½†å¦‚æœå¤–æ›åŠŸèƒ½ç›¸å°å–®ç´”æˆ–æ˜¯ä¸»æ©Ÿç’°å¢ƒå› ç´ ç„¡æ³•ä½¿ç”¨ Composerï¼Œregister_post_type() é‚„æ˜¯ç„¡æ•µå¥½ç”¨çš„XD</p>
<h3 id="æ–°å¢-Taxonomy"><a href="#æ–°å¢-Taxonomy" class="headerlink" title="æ–°å¢ Taxonomy"></a>æ–°å¢ Taxonomy</h3><p>æ¥ä¸‹ä¾†è™•ç†æ›¸çš„åˆ†é¡ä¹Ÿå°±æ˜¯æ—…éŠèˆ‡å•†æ¥­é€™å…©å€‹é¡åˆ¥ï¼Œé–‹å•Ÿ Business.php è¼¸å…¥ä»¥ä¸‹ç¨‹å¼ç¢¼ï¼š</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">use</span> <span class="token package">PostTypes<span class="token punctuation">\</span>Taxonomy</span><span class="token punctuation">;</span>

<span class="token variable">$business</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Taxonomy</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'business'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$business</span><span class="token operator">-></span><span class="token function">posttype</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'book'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$business</span><span class="token operator">-></span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ä¸€æ¨£ï¼Œåˆæ˜¯ä¿è½çš„ä¸‰è¡Œå°±è§£æ±ºï¼Œåªè¦å®£å¿ Taxonomy å¯¦ä¾‹å¾Œå†ç”¨ posttype æ–¹æ³•å»æŒ‡å®š Custom Post Type å°±èƒ½å®Œæˆã€‚</p>
<p><img src="https://oberonlai.blog/wp-content/uploads/wordpress-and-composer/wordpress-and-composer-04.jpg"></p>
<p>ç„¶å¾Œæœ€ç¾å¥½ä¹‹è™•åœ¨æ–¼è¨­å®š Taxonomy çš„æ–¹å¼è·Ÿ Custom Post Type ä¸€æ¨¡ä¸€æ¨£ï¼Œé€™æ”¯é¡åˆ¥çš„ä»‹é¢è¨­è¨ˆå¾—çœŸçš„å¾ˆå¥½ï¼Œéå¸¸æ–¹ä¾¿ä½¿ç”¨ï¼Œçœ‹ä¸‹é¢æ–°å¢ Taxonomy çš„ç¨‹å¼ç¢¼å³å¯æ˜ç™½ï¼š</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">use</span> <span class="token package">PostTypes<span class="token punctuation">\</span>Taxonomy</span><span class="token punctuation">;</span>

<span class="token variable">$name</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
	<span class="token string single-quoted-string">'name'</span>   <span class="token operator">=></span> <span class="token string single-quoted-string">'business'</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'plural'</span> <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'MyBusinessBook'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'btp'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$options</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
	<span class="token string single-quoted-string">'hierarchical'</span> <span class="token operator">=></span> <span class="token constant boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$business</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Taxonomy</span><span class="token punctuation">(</span> <span class="token variable">$name</span><span class="token punctuation">,</span> <span class="token variable">$options</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$business</span><span class="token operator">-></span><span class="token function">posttype</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'book'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$business</span><span class="token operator">-></span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$labels</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
	<span class="token string single-quoted-string">'all_items'</span>          <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'æ‰€æœ‰'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'btp'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'add_new'</span>            <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'æ–°å¢'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'btp'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'add_new_item'</span>       <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'æ–°å¢'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'btp'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'edit_item'</span>          <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'ç·¨è¼¯'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'btp'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'new_item'</span>           <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'æ–°é …ç›®'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'btp'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'view_item'</span>          <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'æª¢è¦–'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'btp'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'view_items'</span>         <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'æª¢è¦–'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'btp'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'search_items'</span>       <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'æœå°‹'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'btp'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'not_found'</span>          <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'ç„¡çµæœ'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'btp'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">'not_found_in_trash'</span> <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'ç„¡çµæœ'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'btp'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$business</span><span class="token operator">-></span><span class="token function">labels</span><span class="token punctuation">(</span> <span class="token variable">$labels</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>å¯«æ³•åŒ PostTypeï¼Œå°±åªæ˜¯æ›æˆ Taxonomy ä»¥åŠä¿®æ”¹æˆå°æ‡‰çš„è®Šæ•¸åç¨±å³å¯ï¼Œæ‰€ä»¥å¦å¤–ä¸€å€‹åˆ†é¡ Travel æ¯”ç…§è¾¦ç†å³å¯ã€‚</p>
<p>é€™å€‹å¥—ä»¶é‚„æœ‰å¦å¤–ä¸€å€‹å¼·å¤§ä¹‹è™•ï¼Œå®ƒå¯ä»¥æ§åˆ¶å¾Œå°æ–‡ç« åˆ—è¡¨æ¬„ä½çš„æ–°å¢èˆ‡éš±è—ï¼Œé€™éƒ¨åˆ†æœƒè·Ÿå¦å¤–ä¸€å€‹å°ˆé–€åšæ¬„ä½çš„å¥—ä»¶ä¸€èµ·èªªæ˜ã€‚</p>
<h2 id="wp-metabox"><a href="#wp-metabox" class="headerlink" title="wp-metabox"></a>wp-metabox</h2><p>å¯¦å‹™ä¸Šå¸¸é‡åˆ°è¦æ–°å¢æ–‡ç« çš„è‡ªè¨‚æ¬„ä½ä¾†å¢åŠ æ–‡ç« è³‡è¨Šï¼Œæˆ‘æœ€æ„›ç”¨çš„å¤–æ›çµ•å°æ˜¯ ACF Proï¼Œå…¶ä»–é‚„æœ‰åƒæ˜¯ Cmb2ã€Metabox.ioã€Podsã€Toolset ç­‰ç­‰ï¼Œç”¨å¤–æ›ä¾†è™•ç†è‡ªè¨‚æ¬„ä½å°æˆ‘ä¾†èªªæ˜¯å†å¹³å¸¸ä¹Ÿä¸éçš„äº‹ï¼Œç›´åˆ°éœ€è¦æŠŠå¤–æ›ç™¼ä½ˆçµ¦åˆ¥äººç”¨æ™‚ï¼Œæ‰é©šè¦ºå£“ç¸®ä¹‹å¾Œç«Ÿç„¶æœ‰å¥½å¹¾ MBï¼Œè¿½æŸ¥ä¹‹ä¸‹å…‰ ACF Pro å°±æœ‰ 7.7MB ä¹‹å¤šã€‚</p>
<p>æ–¼æ˜¯é‡æ–°æª¢è¦–è‡ªå·±å°æ–¼ ACF çš„ä½¿ç”¨ç¿’æ…£ï¼Œè§€å¯Ÿå¸¸ç”¨çš„åŠŸèƒ½èˆ‡æ¬„ä½æœ‰å“ªäº›ï¼Œäº‹å¯¦ä¸Šä¸å¤–ä¹å°±æ˜¯æœ€åŸºæœ¬çš„æ–‡å­—ã€åœ–ç‰‡ä¸Šå‚³ã€ä¸‹æ‹‰é¸å–®ä»¥åŠé‡è¤‡å™¨æœ€å¸¸ä½¿ç”¨ï¼Œå…¶ä»–æœƒç”¨åˆ°çš„æ©Ÿæœƒå¾ˆå°‘ã€‚</p>
<p>ç‚ºäº†æ‰¾å°‹æ›¿ä»£æ–¹æ¡ˆç…§æ…£ä¾‹å…ˆå» Packagist çˆ¬äº†ä¸€ä¸‹ï¼Œæ‰¾åˆ°ä¸å°‘å¥—ä»¶åœ¨åšï¼Œä½†åŸºæœ¬ä¸Šéƒ½è·Ÿ ACF å·®ä¸å¤šï¼ŒåŠŸèƒ½åŒ…å±±åŒ…æµ·é«”ç©ä¹Ÿæ˜¯éå¸¸å¯è§€ï¼Œæœ€å¾Œå›åˆ° Github æ‰¾åˆ°ç”± Matthew Kosloski æ‰€å¯«çš„ <a target="_blank" rel="noopener" href="https://github.com/MatthewKosloski/wp-metabox-constructor-class">wp-metabox-constructor-class</a>ï¼Œå‰›å¥½è£¡é¢æä¾›çš„æ¬„ä½å¯ä»¥æ»¿è¶³æˆ‘çš„åŸºæœ¬éœ€æ±‚ã€‚</p>
<p>ä½†è©²é¡åˆ¥ä¸Šæ¬¡æ›´æ–°æ˜¯å››å¹´å‰äº†ï¼Œä¹Ÿæ²’æœ‰ä¸Šæ¶ Packagistï¼Œæ‰€ä»¥æˆ‘å°±æŠŠå®ƒæ•´ç†äº†ä¸€ä¸‹å¾Œä¸Šå‚³ï¼Œæ•´ç†çš„éç¨‹ä¸­ç™¼ç¾åˆ°è¦æ–°å¢æ¬„ä½é¡å‹é€²å»ä¹Ÿä¸é›£ï¼Œæ‰€ä»¥æˆ‘ç¾åœ¨éƒ½æ‹¿é€™å¥—ç•¶æˆ‘çš„ Metabox ä¸»åŠ›é–‹ç™¼å¥—ä»¶ã€‚</p>
<p>å…§å»ºå…­ç¨®æ¬„ä½ï¼šTextã€Textareaã€Checkboxã€Image Uploadã€Editorã€Repeaterï¼Œå®‰è£æ–¹å¼å¦‚ä¸‹ï¼š</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">composer</span> require oberonlai/wp-metabox<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>å‡è¨­æˆ‘å€‘ç¾åœ¨è¦å¹«æ›¸å¢åŠ ä¸€å€‹ ISBN èˆ‡æ›¸ä»‹æ¬„ä½ï¼Œåˆ†åˆ¥æœƒç”¨æ–‡å­—èˆ‡è¦–è¦ºåŒ–ç·¨è¼¯å™¨ä¾†åšï¼Œæ‰“é–‹ Field.php è¼¸å…¥ä»¥ä¸‹ç¨‹å¼ç¢¼ï¼š</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">use</span> <span class="token package">ODS<span class="token punctuation">\</span>Metabox</span><span class="token punctuation">;</span>

<span class="token variable">$metabox</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Metabox</span><span class="token punctuation">(</span>
	<span class="token keyword">array</span><span class="token punctuation">(</span>
		<span class="token string single-quoted-string">'id'</span>       <span class="token operator">=></span> <span class="token string single-quoted-string">'book_info'</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'title'</span>    <span class="token operator">=></span> <span class="token string single-quoted-string">'æ›¸ç±è³‡æ–™'</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'screen'</span>   <span class="token operator">=></span> <span class="token string single-quoted-string">'book'</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'context'</span>  <span class="token operator">=></span> <span class="token string single-quoted-string">'normal'</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'priority'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'default'</span><span class="token punctuation">,</span>
	<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$metabox</span><span class="token operator">-></span><span class="token function">addText</span><span class="token punctuation">(</span>
	<span class="token keyword">array</span><span class="token punctuation">(</span>
		<span class="token string single-quoted-string">'id'</span>    <span class="token operator">=></span> <span class="token string single-quoted-string">'book_isbn'</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'label'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'ISBN'</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'desc'</span>  <span class="token operator">=></span> <span class="token string single-quoted-string">'æ›¸ç±çš„ ISBN'</span><span class="token punctuation">,</span>
	<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$metabox</span><span class="token operator">-></span><span class="token function">addEditor</span><span class="token punctuation">(</span>
	<span class="token keyword">array</span><span class="token punctuation">(</span>
		<span class="token string single-quoted-string">'id'</span>    <span class="token operator">=></span> <span class="token string single-quoted-string">'book_intro'</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'label'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'æ›¸ç±ä»‹ç´¹'</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'desc'</span>  <span class="token operator">=></span> <span class="token string single-quoted-string">'æ›¸ç±çš„ç°¡çŸ­ä»‹ç´¹'</span><span class="token punctuation">,</span>
	<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>å…ˆä½¿ç”¨ use ä¾†è¼‰å…¥ ODS çš„å‘½åç©ºé–“ Metabox é¡åˆ¥ï¼Œç„¶å¾Œå»ºç«‹ä¸€å€‹ Metabox çš„ç‰©ä»¶ï¼Œé€™æ˜¯æŒ‡ metabox çš„å®¹å™¨ï¼Œæœ‰é€™å®¹å™¨ä¹‹å¾Œæ‰èƒ½æŠŠæ¬„ä½æ”¾é€²å»ï¼Œæ¥ä¸‹ä¾†ä½¿ç”¨ addText è·Ÿ addEditor é€™å…©å€‹æ–¹æ³•ï¼Œå®Œæˆå¾Œå¦‚ä¸‹åœ–ï¼š</p>
<p><img src="https://oberonlai.blog/wp-content/uploads/wordpress-and-composer/wordpress-and-composer-05.jpg"></p>
<p>æ›´å¤šçš„ä½¿ç”¨æ–¹æ³•å¯ä»¥åƒè€ƒ README.mdï¼Œé€™é‚Šæ¨è–¦ä¸€å€‹ VSCode å¥—ä»¶ï¼š<a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=shd101wyy.markdown-preview-enhanced">Markdown Preview Enhanced</a>ï¼Œå®ƒå¯ä»¥ç›´æ¥åœ¨ VSCode è£¡é¢é è¦½ Markdown æ–‡ä»¶ï¼Œå°±ä¸ç”¨å†è¿”å› Github é é¢æˆ–æ˜¯å¥—ä»¶çš„ç·šä¸Šæ–‡ä»¶å»æŸ¥çœ‹ä½¿ç”¨æ–¹æ³•ã€‚</p>
<p><img src="https://oberonlai.blog/wp-content/uploads/wordpress-and-composer/wordpress-and-composer-11.jpg"></p>
<p>æ¥ä¸‹ä¾†æˆ‘å€‘æ¥åˆ°å®¢æˆ¶éœ€æ±‚ï¼Œå®¢æˆ¶å¸Œæœ›å¯ä»¥åœ¨æ–‡ç« åˆ—è¡¨é é¢å°±èƒ½çœ‹åˆ° ISBN ä»¥ä¾¿æŸ¥è©¢ï¼Œé€™æ™‚å€™ä¸Šé¢ç”¨éçš„ posttype å¥—ä»¶åˆèƒ½æ´¾ä¸Šç”¨å ´äº†ã€‚</p>
<p><img src="https://oberonlai.blog/wp-content/uploads/wordpress-and-composer/wordpress-and-composer-06.jpg"></p>
<p>æˆ‘å€‘å…ˆåœ¨ posts/book åº•ä¸‹æ–°å¢ä¸€å€‹æª”æ¡ˆå«åš Column.phpï¼Œè¼¸å…¥ä»¥ä¸‹ç¨‹å¼ç¢¼ï¼š</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">use</span> <span class="token package">PostTypes<span class="token punctuation">\</span>Columns</span><span class="token punctuation">;</span>

<span class="token variable">$books</span><span class="token operator">-></span><span class="token function">columns</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">add</span><span class="token punctuation">(</span>
	<span class="token keyword">array</span><span class="token punctuation">(</span>
		<span class="token string single-quoted-string">'isbn'</span> <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'ISBN'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$books</span><span class="token operator">-></span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ä½¿ç”¨ columns çš„ add æ–¹æ³•ä¾†æ–°å¢æ¬„ä½ï¼Œè£¡é¢å‚³å…¥çš„æ˜¯ä¸€å€‹é™£åˆ—ï¼Œç”¨ key value çš„æ–¹å¼ä¾†å»ºç«‹æ¬„ä½ ID èˆ‡é¡¯ç¤ºåç¨±ï¼Œæœ€é‡è¦çš„æ˜¯æœ€å¾Œä¸€è¡Œçš„ $books-&gt;register() ä¸èƒ½æ¼æ‰ï¼Œæ¥ä¸‹ä¾†æˆ‘å€‘å°±å¯ä»¥é‡å°é€™å€‹ ID ä¾†è®€å–è³‡æ–™ï¼š</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">use</span> <span class="token package">PostTypes<span class="token punctuation">\</span>Columns</span><span class="token punctuation">;</span>

<span class="token variable">$books</span><span class="token operator">-></span><span class="token function">columns</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">add</span><span class="token punctuation">(</span>
	<span class="token keyword">array</span><span class="token punctuation">(</span>
		<span class="token string single-quoted-string">'isbn'</span> <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'ISBN'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$books</span><span class="token operator">-></span><span class="token function">columns</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">populate</span><span class="token punctuation">(</span>
	<span class="token string single-quoted-string">'isbn'</span><span class="token punctuation">,</span>
	<span class="token keyword">function</span> <span class="token punctuation">(</span> <span class="token variable">$column</span><span class="token punctuation">,</span> <span class="token variable">$post_id</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">echo</span> <span class="token function">esc_html</span><span class="token punctuation">(</span> <span class="token function">get_post_meta</span><span class="token punctuation">(</span> <span class="token variable">$post_id</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'book_isbn'</span><span class="token punctuation">,</span> <span class="token constant boolean">true</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$books</span><span class="token operator">-></span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ä½¿ç”¨çš„æ–¹æ³•æ˜¯ populateï¼Œç¬¬ä¸€å€‹åƒæ•¸å‚³æ¬„ä½ IDï¼Œç¬¬äºŒå€‹åƒæ•¸æ˜¯å›å‘¼å‡½å¼ï¼Œæˆ‘å€‘ç”¨ get_post_meta ä¾†å–å¾— metabox ä¸­çš„å€¼ï¼Œå®Œæˆå°±èƒ½çœ‹åˆ°æ–°å¢äº†ä¸€å€‹ ISBN æ¬„ä½ï¼š</p>
<p><img src="https://oberonlai.blog/wp-content/uploads/wordpress-and-composer/wordpress-and-composer-07.jpg"></p>
<p>ä½†å®¢æˆ¶å¸Œæœ›æ˜¯æ”¾åœ¨åˆ†é¡ MyBussiness æ¬„ä½çš„å¾Œé¢ï¼Œposttype å¥—ä»¶ä¹Ÿéå¸¸è²¼å¿ƒäº†æä¾›ä¿®æ”¹æ¬„ä½é †åºçš„åŠŸèƒ½ï¼Œå¾å·¦æ•¸éä¾†åˆ†é¡æ¬„ä½æ˜¯ç¬¬ä¸‰å€‹ï¼Œæ‰€ä»¥æˆ‘å€‘åªè¦å°‡ ISBN è¨­æˆ 4 å³å¯ï¼š</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">use</span> <span class="token package">PostTypes<span class="token punctuation">\</span>Columns</span><span class="token punctuation">;</span>

<span class="token variable">$books</span><span class="token operator">-></span><span class="token function">columns</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">add</span><span class="token punctuation">(</span>
	<span class="token keyword">array</span><span class="token punctuation">(</span>
		<span class="token string single-quoted-string">'isbn'</span> <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'ISBN'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$books</span><span class="token operator">-></span><span class="token function">columns</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">populate</span><span class="token punctuation">(</span>
	<span class="token string single-quoted-string">'isbn'</span><span class="token punctuation">,</span>
	<span class="token keyword">function</span> <span class="token punctuation">(</span> <span class="token variable">$column</span><span class="token punctuation">,</span> <span class="token variable">$post_id</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">echo</span> <span class="token function">esc_html</span><span class="token punctuation">(</span> <span class="token function">get_post_meta</span><span class="token punctuation">(</span> <span class="token variable">$post_id</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'book_isbn'</span><span class="token punctuation">,</span> <span class="token constant boolean">true</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$books</span><span class="token operator">-></span><span class="token function">columns</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">order</span><span class="token punctuation">(</span>
	<span class="token keyword">array</span><span class="token punctuation">(</span>
		<span class="token string single-quoted-string">'isbn'</span> <span class="token operator">=></span> <span class="token number">4</span><span class="token punctuation">,</span>
	<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$books</span><span class="token operator">-></span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ä½¿ç”¨ order æ–¹æ³•å°±èƒ½æŒ‡å®šé †åºï¼Œå¦‚æœè¦ç”¨ WordPress åŸæœ¬çš„æ–¹æ³•å¯«å¾ˆéº»ç…©ï¼Œé¦–å…ˆè¦å»ºç«‹ä¸€å€‹ç©ºé™£åˆ—ï¼Œç„¶å¾ŒæŠŠæ—¢æœ‰çš„æ¬„ä½æ”¾é€²å»ï¼Œé€éè¿´åœˆåˆ¤æ–·æ¬„ä½åç¨±æ˜¯å¦ç‚º isbnï¼Œå†åˆ¤æ–·è¿´åœˆå·²ç¶“è·‘åˆ°ç¬¬å¹¾å€‹ï¼Œæœ€é‡è¦çš„æ˜¯æˆ‘æ°¸é è¨˜ä¸èµ·ä¾†å‹¾é» ( Hook ) è¦ç”¨å“ªä¸€å€‹â€¦Orz</p>
<p>æœ€å¾Œå®¢æˆ¶å¸Œæœ›å¯ä»¥æŒ‰ç…§ ISBN é€²è¡Œæ’åºï¼Œé€™ç”¨å‹¾é»ä¾†åšçš„è©±ä¸€æ¨£æ˜¯æœ‰å¾ˆå¤šæ­¥é©Ÿéœ€è¦è™•ç†ï¼Œä½† posttype å¹«æˆ‘å€‘éƒ½æå®šäº†ï¼Œåªè¦ä½¿ç”¨ sortable æ–¹æ³•å³å¯ï¼š</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">use</span> <span class="token package">PostTypes<span class="token punctuation">\</span>Columns</span><span class="token punctuation">;</span>

<span class="token variable">$books</span><span class="token operator">-></span><span class="token function">columns</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">add</span><span class="token punctuation">(</span>
	<span class="token keyword">array</span><span class="token punctuation">(</span>
		<span class="token string single-quoted-string">'isbn'</span> <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'ISBN'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$books</span><span class="token operator">-></span><span class="token function">columns</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">populate</span><span class="token punctuation">(</span>
	<span class="token string single-quoted-string">'isbn'</span><span class="token punctuation">,</span>
	<span class="token keyword">function</span> <span class="token punctuation">(</span> <span class="token variable">$column</span><span class="token punctuation">,</span> <span class="token variable">$post_id</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">echo</span> <span class="token function">esc_html</span><span class="token punctuation">(</span> <span class="token function">get_post_meta</span><span class="token punctuation">(</span> <span class="token variable">$post_id</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'book_isbn'</span><span class="token punctuation">,</span> <span class="token constant boolean">true</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$books</span><span class="token operator">-></span><span class="token function">columns</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">order</span><span class="token punctuation">(</span>
	<span class="token keyword">array</span><span class="token punctuation">(</span>
		<span class="token string single-quoted-string">'isbn'</span> <span class="token operator">=></span> <span class="token number">4</span><span class="token punctuation">,</span>
	<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$books</span><span class="token operator">-></span><span class="token function">columns</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">sortable</span><span class="token punctuation">(</span>
	<span class="token keyword">array</span><span class="token punctuation">(</span>
		<span class="token string single-quoted-string">'isbn'</span> <span class="token operator">=></span> <span class="token keyword">array</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'isbn'</span><span class="token punctuation">,</span> <span class="token constant boolean">true</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$books</span><span class="token operator">-></span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ä½¿ç”¨ sortable æ–¹æ³•æŒ‡å®šè¦é€²è¡Œæ’åºçš„æ¬„ä½ IDï¼Œç„¶å¾Œçµ¦å®ƒä¸€å€‹ trueï¼ŒåŒæ¨£çš„é“ç†ï¼Œå¦‚æœå®¢æˆ¶ä»Šå¤©æƒ³è¦è®“æŸå€‹æ¬„ä½åœæ­¢æ’åºï¼Œå‚³å…¥ false å³å¯ã€‚</p>
<p>ä»¥ä¸Šç¨‹å¼ç¤ºç¯„äº†æ–°å¢æ¬„ä½ã€ç”¢ç”Ÿæ¬„ä½è³‡æ–™ã€è‡ªè¨‚é †åºä»¥åŠæ’åºåŠŸèƒ½ï¼š</p>
<p><img src="https://oberonlai.blog/wp-content/uploads/wordpress-and-composer/wordpress-and-composer-08.jpg"></p>
<p>posttype åŠ ä¸Š wp-metabox çœŸçš„å¯ä»¥çœä¸‹å¾ˆå¤šæ™‚é–“å•Šï½</p>
<h2 id="wp-option"><a href="#wp-option" class="headerlink" title="wp-option"></a>wp-option</h2><p>å¦‚æœéœ€è¦é–‹ç™¼çµ¦ç¤¾ç¾¤ä½¿ç”¨çš„å¤–æ›ï¼Œæœ€ä¸å¯æˆ–ç¼ºçš„åŠŸèƒ½å°±æ˜¯è¨­å®šé é¢äº†ï¼Œæœ‰äº†è¨­å®šé é¢å°±èƒ½æŠŠå¤–æ›çš„è¨­å®šå€¼äº¤çµ¦ä½¿ç”¨è€…æ±ºå®šï¼Œé€²è€Œä¾ç…§å¯¦éš›éœ€æ±‚å½ˆæ€§èª¿æ•´ã€‚</p>
<p>wp-option é€™å¥—æ˜¯æ ¹æ“š boospot é–‹ç™¼çš„ <a target="_blank" rel="noopener" href="https://github.com/boospot/boo-settings-helper">boo-settings-helper</a> åŠ ä»¥æ”¹è‰¯ï¼Œæˆ‘å¢åŠ äº†ä¸€å±¤å°è£ä»‹é¢ï¼Œç›®çš„æ˜¯æƒ³è¦å¯ä»¥è·Ÿ wp-metabox ä¸€æ¨£å¯ä»¥é€é addText()ã€addSelect() é€™æ¨£çš„èªå¥ä¾†ä½¿ç”¨å®ƒï¼ŒèŠ±äº†å…©å¤©çš„æ™‚é–“è¨­è¨ˆèˆ‡æ•´ç†æ–‡ä»¶ï¼Œç”¨èµ·ä¾†å¯¦åœ¨æ˜¯å¤ªæ„‰æ‚…äº†ï¼Œå†ä¹Ÿä¸ç”¨è¨˜å‹¾é»äº†ã€‚</p>
<p><img src="https://oberonlai.blog/wp-content/uploads/wordpress-and-composer/wordpress-and-composer-10.jpg"></p>
<p>è¦ä½¿ç”¨çš„è©±ç¬¬ä¸€æ­¥å…ˆé€²è¡Œå®‰è£ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">composer require oberonlai&#x2F;wp-option<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>æ¥ä¸‹ä¾†åœ¨å»ºç«‹å¯¦ä¾‹çš„æ™‚å€™ï¼Œå…ˆå‘½åè‡ªå·±çš„å‰ç¶´ä»¥ä½œç‚ºæ¬„ä½åç¨±çš„è¾¨è­˜ï¼Œå°±ä¸æœƒè·Ÿæ—¢æœ‰çš„è¡çªï¼š</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">require</span> <span class="token constant">__DIR__</span> <span class="token operator">.</span> <span class="token string single-quoted-string">'/vendor/autoload.php'</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">ODS<span class="token punctuation">\</span>Option</span><span class="token punctuation">;</span>

<span class="token variable">$prefix</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'plugin-prefix'</span><span class="token punctuation">;</span>

<span class="token variable">$books</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Option</span><span class="token punctuation">(</span> <span class="token variable">$prefix</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æ•´å€‹å¥—ä»¶çš„ä½¿ç”¨é‚è¼¯å¾ˆå–®ç´”ï¼Œè¦æ–°å¢ä¸€å€‹è¨­å®šé é¢éƒ½æ˜¯ä¸€æ¨£çš„æ­¥é©Ÿï¼š</p>
<ol>
<li>æ–°å¢é¸å–®</li>
<li>æ–°å¢åˆ†é </li>
<li>åŠ å…¥æ¬„ä½</li>
<li>è¨»å†Šæ¬„ä½</li>
</ol>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token comment">// Require the Composer autoloader.</span>
<span class="token keyword">require</span> <span class="token constant">__DIR__</span> <span class="token operator">.</span> <span class="token string single-quoted-string">'/vendor/autoload.php'</span><span class="token punctuation">;</span>

<span class="token comment">// Import PostTypes.</span>
<span class="token keyword">use</span> <span class="token package">ODS<span class="token punctuation">\</span>Option</span><span class="token punctuation">;</span>

<span class="token variable">$config</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Option</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'plugin-prefix-'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$config</span><span class="token operator">-></span><span class="token function">addMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$config</span><span class="token operator">-></span><span class="token function">addTab</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$config</span><span class="token operator">-></span><span class="token function">addText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$config</span><span class="token operator">-></span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Don't forget this.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="1-æ–°å¢é¸å–®"><a href="#1-æ–°å¢é¸å–®" class="headerlink" title="1.æ–°å¢é¸å–®"></a>1.æ–°å¢é¸å–®</h3><p>é¦–å…ˆæˆ‘å€‘å…ˆçœ‹å¢åŠ é¸å–®çš„éƒ¨åˆ†ï¼Œè¦å‚³å…¥çš„åƒæ•¸æ˜¯è¨­å®šé æ¨™é¡Œã€é¸å–®æ–‡å­—ã€ä»£ç¨±ï¼Œæ¯”è¼ƒè¦æ³¨æ„çš„æ˜¯å­é¸å–®çš„è¨­å®šï¼Œå¦‚æœä½ æƒ³æŠŠè¨­å®šé¸å–®æ”¾åœ¨æŸå€‹é¸å–®åº•ä¸‹ï¼Œåªè¦æŠŠ submenu åƒæ•¸è¨­å®šç‚º trueï¼Œå†æŠŠ wp-admin å¾Œé¢çš„ç¶²å€è·¯å¾‘å¸¶å…¥ parent åƒæ•¸å³å¯ï¼š</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token variable">$config</span><span class="token operator">-></span><span class="token function">addMenu</span><span class="token punctuation">(</span>
	<span class="token keyword">array</span><span class="token punctuation">(</span>
		<span class="token string single-quoted-string">'page_title'</span> <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'Plugin Name Settings'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'plugin-name'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'menu_title'</span> <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'Plugin Name'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'plugin-name'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'capability'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'manage_options'</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'slug'</span>       <span class="token operator">=></span> <span class="token string single-quoted-string">'plugin-name'</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'icon'</span>       <span class="token operator">=></span> <span class="token string single-quoted-string">'dashicons-performance'</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'position'</span>   <span class="token operator">=></span> <span class="token number">10</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'submenu'</span>    <span class="token operator">=></span> <span class="token constant boolean">true</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'parent'</span>     <span class="token operator">=></span> <span class="token string single-quoted-string">'edit.php?post_type=event'</span><span class="token punctuation">,</span>
	<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h3 id="2-æ–°å¢åˆ†é "><a href="#2-æ–°å¢åˆ†é " class="headerlink" title="2.æ–°å¢åˆ†é "></a>2.æ–°å¢åˆ†é </h3><p>æ¥ä¸‹ä¾†æ–°å¢åˆ†é çš„éƒ¨åˆ†ï¼Œæ¯å€‹è¨­å®šé ä¸€å®šéƒ½è¦æœ‰ä¸€å€‹åˆ†é ï¼Œå®ƒå°±æ˜¯åƒæ˜¯æ¬„ä½çš„å®¹å™¨ï¼Œæ‰€æœ‰çš„æ¬„ä½éƒ½è¦æ”¾åœ¨åˆ†é è£¡é¢æ‰æœƒæ­£ç¢ºé¡¯ç¤ºï¼Œid åƒæ•¸å°±æ˜¯åˆ†é å®¹å™¨çš„åç¨±ï¼Œè¦æ–°å¢çš„æ¬„ä½éœ€è¦å¸¶å…¥é€™å€‹åç¨±ï¼Œå°±èƒ½æŠŠè©²æ¬„ä½æŒ‡å®šåœ¨è©²åˆ†é ä¸‹é¢ï¼š</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token variable">$config</span><span class="token operator">-></span><span class="token function">addTab</span><span class="token punctuation">(</span>
	<span class="token keyword">array</span><span class="token punctuation">(</span>
		<span class="token keyword">array</span><span class="token punctuation">(</span>
			<span class="token string single-quoted-string">'id'</span>    <span class="token operator">=></span> <span class="token string single-quoted-string">'general_section'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'title'</span> <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'General Settings'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'plugin-name'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'desc'</span>  <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'These are general settings for Plugin Name'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'plugin-name'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">)</span>
	<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>å¦‚æœè¦æ–°å¢å…©å€‹ä»¥ä¸Šçš„åˆ†é ï¼Œå°±å‚³å…¥å…©ç­†é™£åˆ—è³‡æ–™å³å¯ï¼š</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token variable">$config</span><span class="token operator">-></span><span class="token function">addTab</span><span class="token punctuation">(</span>
	<span class="token keyword">array</span><span class="token punctuation">(</span>
		<span class="token keyword">array</span><span class="token punctuation">(</span>
			<span class="token string single-quoted-string">'id'</span>    <span class="token operator">=></span> <span class="token string single-quoted-string">'general_section'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'title'</span> <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'General Settings'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'plugin-name'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'desc'</span>  <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'These are general settings for Plugin Name'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'plugin-name'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token keyword">array</span><span class="token punctuation">(</span>
			<span class="token string single-quoted-string">'id'</span>    <span class="token operator">=></span> <span class="token string single-quoted-string">'advance_section'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'title'</span> <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'Advanced Settings'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'plugin-name'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'desc'</span>  <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'These are advance settings for Plugin Name'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'plugin-name'</span> <span class="token punctuation">)</span>
		<span class="token punctuation">)</span>
	<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="3-æ–°å¢æ¬„ä½"><a href="#3-æ–°å¢æ¬„ä½" class="headerlink" title="3.æ–°å¢æ¬„ä½"></a>3.æ–°å¢æ¬„ä½</h3><p>ç›®å‰è©²å¥—ä»¶å¯ä»¥ä½¿ç”¨çš„æ¬„ä½æœ‰åå››ç¨®ï¼š</p>
<ul>
<li>  Text</li>
<li>  URL</li>
<li>  Number</li>
<li>  Color</li>
<li>  Textarea</li>
<li>  Radio Button</li>
<li>  Select</li>
<li>  HTML</li>
<li>  Checkbox</li>
<li>  Multi Select</li>
<li>  Related</li>
<li>  Password</li>
<li>  File</li>
<li>  Media Upload</li>
</ul>
<p>æ¯ç¨®çš„ç”¨æ³•éƒ½ä¸€æ¨£ï¼Œè­¬å¦‚è¦å¢åŠ  Text æ¬„ä½ï¼Œä½¿ç”¨ addText() æ–¹æ³•ï¼Œç„¶å¾Œæœ‰å…©å€‹åƒæ•¸è¦å‚³å…¥ï¼Œç¬¬ä¸€å€‹æ˜¯åˆ†é  idï¼Œç¬¬äºŒå€‹æ˜¯è¨­å®šå…§å®¹ï¼Œç¬¬ä¸‰å€‹åƒæ•¸æ˜¯é¸å¡«çš„å›å‘¼å‡½å¼ï¼Œä¸»è¦åŠŸèƒ½åœ¨è‡ªè¨‚ input çš„ DOM çµæ§‹ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">$config-&gt;addText(
	&#39;general_section&#39;,
	array(
		&#39;id&#39;                &#x3D;&gt; &#39;text_field_id&#39;,
		&#39;label&#39;             &#x3D;&gt; __( &#39;Hello World&#39;, &#39;plugin-name&#39; ),
		&#39;desc&#39;              &#x3D;&gt; __( &#39;Some description of my field&#39;, &#39;plugin-name&#39; ),
		&#39;placeholder&#39;       &#x3D;&gt; &#39;This is Placeholder&#39;,
		&#39;show_in_rest&#39;      &#x3D;&gt; true,
		&#39;class&#39;             &#x3D;&gt; &#39;my_custom_css_class&#39;,
		&#39;size&#39;              &#x3D;&gt; &#39;regular&#39;,
	),
);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>å¸¶å…¥ç¬¬ä¸‰å€‹å›å‘¼å‡½å¼çš„ç”¨æ³•ï¼š</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token variable">$config</span><span class="token operator">-></span><span class="token function">addText</span><span class="token punctuation">(</span>
	<span class="token string single-quoted-string">'general_section'</span><span class="token punctuation">,</span>
	<span class="token keyword">array</span><span class="token punctuation">(</span>
		<span class="token string single-quoted-string">'id'</span>    <span class="token operator">=></span> <span class="token string single-quoted-string">'text_field_id'</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'label'</span> <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'Hello World'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'plugin-name'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token variable">$args</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token variable">$html</span>  <span class="token operator">=</span> <span class="token function">sprintf</span><span class="token punctuation">(</span>
			<span class="token string single-quoted-string">'&lt;input 
 class="regular-text"
 type="%1$s"
 name="%2$s"
 value="%3$s"
 placeholder="%4$s"
 style="border: 3px solid red;"
 />'</span><span class="token punctuation">,</span>
			<span class="token variable">$args</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'type'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token variable">$args</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token variable">$args</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'value'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'Placeholder from callback'</span>
		<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token variable">$html</span> <span class="token operator">.=</span> <span class="token string single-quoted-string">'&lt;br/>&lt;small>This field is generated with callback parameter&lt;/small>'</span><span class="token punctuation">;</span>
		<span class="token keyword">echo</span> <span class="token variable">$html</span><span class="token punctuation">;</span>
		<span class="token keyword">unset</span><span class="token punctuation">(</span> <span class="token variable">$html</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>å¦‚æœæ˜¯è¦åš Radio æˆ–æ˜¯ä¸‹æ‹‰é¸å–®ç”¨æ³•ä¹Ÿä¸€æ¨£ï¼Œå·®åˆ¥åœ¨æ–¼è¦å¤šè¨­å®š option åƒæ•¸ä¾†æ±ºå®šé¸é …ï¼š</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token variable">$config</span><span class="token operator">-></span><span class="token function">addRadio</span><span class="token punctuation">(</span>
	<span class="token string single-quoted-string">'general_section'</span><span class="token punctuation">,</span>
	<span class="token keyword">array</span><span class="token punctuation">(</span>
		<span class="token string single-quoted-string">'id'</span>      <span class="token operator">=></span> <span class="token string single-quoted-string">'radio_field_id'</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'label'</span>   <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'Radio Button'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'plugin-name'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'desc'</span>    <span class="token operator">=></span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'A radio button'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'plugin-name'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'options'</span> <span class="token operator">=></span> <span class="token keyword">array</span><span class="token punctuation">(</span>
			<span class="token string single-quoted-string">'radio_1'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'Radio 1'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'radio_2'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'Radio 2'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'radio_3'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'Radio 3'</span><span class="token punctuation">,</span>
		<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'default'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'radio_2'</span><span class="token punctuation">,</span> <span class="token comment">// é è¨­å€¼</span>
	<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æ‰€æœ‰æ¬„ä½çš„ä½¿ç”¨æ–¹æ³•å¯ä»¥åƒè€ƒå¥—ä»¶è£¡é¢çš„ README.md èªªæ˜ã€‚</p>
<h3 id="4-è¨»å†Šæ¬„ä½"><a href="#4-è¨»å†Šæ¬„ä½" class="headerlink" title="4.è¨»å†Šæ¬„ä½"></a>4.è¨»å†Šæ¬„ä½</h3><p>æœ€å¾Œä¸€å€‹æ–¹æ³•ä¸éœ€è¦å‚³å…¥ä»»ä½•åƒæ•¸ä½†å»æ˜¯æ˜¯å¿…é ˆçš„ï¼Œå› ç‚ºå®ƒåŒ…å«äº†æ‰€æœ‰ä»¥ä¸Šè¡Œç‚ºçš„å‹¾é»è¨»å†Šï¼Œæ‰€ä»¥è¬ä¸€ä½ ç™¼ç¾é¸å–®ã€åˆ†é ã€æ¬„ä½éƒ½å¯«å¥½äº†å»æ²’åæ‡‰ï¼Œæª¢æŸ¥çœ‹çœ‹æ˜¯å¦æœ‰æ­£ç¢ºè¨»å†Šæ¬„ä½ï¼š</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token variable">$config</span><span class="token operator">-></span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>ä»¥ä¸Šæ˜¯è¨­å®šå¤–æ›è¨­å®šé¸é …çš„ç”¨æ³•ï¼Œä½ å¯ä»¥å¢åŠ å¤šå€‹è¨­å®šé¸å–®ï¼Œéƒ½æ˜¯ä¸€æ¨£çš„æ­¥é©Ÿèˆ‡æµç¨‹ï¼Œå¦‚æœè¦å–å¾—è¨­å®šå€¼ï¼Œä½¿ç”¨ WordPress å…§å»ºçš„ get_option() å³å¯ï¼Œè¨˜å¾—ä¸è¦å¿˜è¨˜å‰ç¶´å–”ï¼</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token variable">$my_text_field_value</span> <span class="token operator">=</span> <span class="token function">get_option</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'plugin-prefix-my_text_field'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="wp-asset"><a href="#wp-asset" class="headerlink" title="wp-asset"></a>wp-asset</h2><p>è¼‰å…¥ JSã€CSS éœæ…‹è³‡æºæª”å¹¾ä¹æ˜¯æ¯å€‹å¤–æ›éƒ½æœƒç”¨åˆ°çš„åŠŸèƒ½ï¼ŒåŸå§‹çš„å¯«æ³•è¦å¸¶å…¥äº”å€‹åƒæ•¸ï¼Œåƒæ•¸çš„å¸¶å…¥é †åºæˆ‘æ¯æ¬¡éƒ½æœƒæéŒ¯ï¼Œå†åŠ ä¸Š wp_register_script()ã€wp_localize_script()ã€wp_enqueue_script() é€™ä¸‰å€‹å‡½å¼éƒ½æœ‰å„è‡ªçš„åƒæ•¸è¦å¸¶å…¥ï¼Œå¸¸å¸¸è¢«æŠ˜é¨°ä¸€ç•ªå¾Œå°±ç«å¤§ä¹¾è„†ç›´æ¥å¼•å…¥ï¼Œç„¶å¾Œå°±æœƒçœ‹åˆ° PHPCS å™´éŒ¯XD</p>
<p>å¹¸å¥½å¾Œä¾†æœ‰ç™¼ç¾ Josantonius å¯«çš„ <a target="_blank" rel="noopener" href="https://github.com/Josantonius/WP_Register">WP_Register</a> å¥—ä»¶å¹«åŠ©æˆ‘è§£æ±ºäº†é€™å€‹å•é¡Œï¼Œç„¶å¾Œæˆ‘åˆæ ¹æ“šå¯¦å‹™ä¸Šæœƒé‡åˆ°çš„æƒ…å¢ƒå†æ”¹å¯«æˆ wp-asset å¥—ä»¶ï¼Œä¸¦åŠ å…¥äº† Ajax åˆ¤æ–·åŠŸèƒ½ï¼Œå®‰è£æ–¹å¼å¦‚ä¸‹ï¼š</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable">$composer</span> require oberonlai/wp-asset<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>æ¥ä¸‹ä¾†è¼‰å…¥ä¸€å€‹ JS æª”ï¼š</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php">
<span class="token keyword">use</span> <span class="token package">ODS<span class="token punctuation">\</span>Asset</span>

<span class="token class-name static-context">Asset</span><span class="token operator">::</span><span class="token function">addScript</span><span class="token punctuation">(</span>
	<span class="token keyword">array</span><span class="token punctuation">(</span>
		<span class="token string single-quoted-string">'name'</span>  <span class="token operator">=></span> <span class="token string single-quoted-string">'my_script'</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'url'</span>   <span class="token operator">=></span> <span class="token constant">ODS_PLUGIN_URL</span> <span class="token operator">.</span> <span class="token string single-quoted-string">'assets/js/script.js'</span><span class="token punctuation">,</span>
	<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æˆ–æ˜¯è¼‰å…¥ CSSï¼š</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token class-name static-context">Asset</span><span class="token operator">::</span><span class="token function">addStyle</span><span class="token punctuation">(</span>
	<span class="token keyword">array</span><span class="token punctuation">(</span>
		<span class="token string single-quoted-string">'name'</span>    <span class="token operator">=></span> <span class="token string single-quoted-string">'my_style'</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'url'</span>     <span class="token operator">=></span> <span class="token constant">ODS_PLUGIN_URL</span> <span class="token operator">.</span> <span class="token string single-quoted-string">'assets/css/style.css'</span><span class="token punctuation">,</span>
	<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>åˆ†åˆ¥ä½¿ç”¨ addScript èˆ‡ addStyle å…©å€‹æ–¹æ³•ï¼Œç„¶å¾Œé€é name å‘½åæª”æ¡ˆåç¨±èˆ‡ url æŒ‡å®šæª”æ¡ˆè·¯å¾‘å°±èƒ½å®Œæˆè¼‰å…¥ï¼Œæ¯”åŸå§‹çš„ wp_enqueue_script å¥½è¨˜å¤šäº†ï¼Œå…¶ä»–å¯é¸åƒæ•¸å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th align="left">key</th>
<th align="left">èªªæ˜</th>
<th align="center">é¡å‹</th>
<th align="center">å¿…å¡«</th>
<th>é è¨­</th>
</tr>
</thead>
<tbody><tr>
<td align="left">name</td>
<td align="left">æª”æ¡ˆå”¯ä¸€åç¨±</td>
<td align="center">å­—ä¸²</td>
<td align="center">æ˜¯</td>
<td></td>
</tr>
<tr>
<td align="left">url</td>
<td align="left">æª”æ¡ˆè·¯å¾‘</td>
<td align="center">å­—ä¸²</td>
<td align="center">æ˜¯</td>
<td></td>
</tr>
<tr>
<td align="left">admin</td>
<td align="left">åœ¨å¾Œå°è¼‰å…¥</td>
<td align="center">å¸ƒæ—å€¼</td>
<td align="center">å¦</td>
<td>false</td>
</tr>
<tr>
<td align="left">deps</td>
<td align="left">ä¾è³´å¥—ä»¶</td>
<td align="center">é™£åˆ—</td>
<td align="center">å¦</td>
<td></td>
</tr>
<tr>
<td align="left">version</td>
<td align="left">ç‰ˆæœ¬è™Ÿ</td>
<td align="center">å­—ä¸²</td>
<td align="center">å¦</td>
<td></td>
</tr>
<tr>
<td align="left">footer</td>
<td align="left">åœ¨é å°¾è¼‰å…¥ ( JS é™å®š )</td>
<td align="center">å¸ƒæ—å€¼</td>
<td align="center">å¦</td>
<td>true</td>
</tr>
<tr>
<td align="left">ajax</td>
<td align="left">å•Ÿç”¨ Ajax åŠŸèƒ½ ( JS é™å®š )</td>
<td align="center">å¸ƒæ—å€¼</td>
<td align="center">å¦</td>
<td>false</td>
</tr>
<tr>
<td align="left">params</td>
<td align="left">éœ€è¦è¼¸å‡ºçµ¦å‰ç«¯çš„åƒæ•¸  ( JS é™å®š )</td>
<td align="center">é™£åˆ—</td>
<td align="center">å¦</td>
<td></td>
</tr>
<tr>
<td align="left">media</td>
<td align="left">åª’é«”é¡å‹ ( CSS é™å®š )</td>
<td align="center">å­—ä¸²</td>
<td align="center">å¦</td>
<td></td>
</tr>
</tbody></table>
<p>éœ€è¦ç‰¹åˆ¥èªªæ˜çš„æ˜¯ Ajax æª”æ¡ˆçš„è¼‰å…¥ï¼Œç•¶ ajax è¨­å®šç‚º true æ™‚ï¼Œæœƒè‡ªå‹•å¸¶å…¥å…©å€‹åƒæ•¸ï¼Œåˆ†åˆ¥ç‚º ajax_url èˆ‡ ajax_nonceï¼Œé€™æ¨£å°±èƒ½ç›´æ¥åœ¨ JS å–å¾—ï¼Œå¦‚æœè¦åŠ å…¥å…¶ä»–åƒæ•¸ä½¿ç”¨ params å³å¯ï¼Œç¯„ä¾‹å¦‚ä¸‹ï¼š</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token class-name static-context">Asset</span><span class="token operator">::</span><span class="token function">addScript</span><span class="token punctuation">(</span>
	<span class="token keyword">array</span><span class="token punctuation">(</span>
		<span class="token string single-quoted-string">'name'</span>    <span class="token operator">=></span> <span class="token string single-quoted-string">'my_ajax'</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'url'</span>     <span class="token operator">=></span> <span class="token constant">YOUR_PLUGIN_URL</span> <span class="token operator">.</span> <span class="token string single-quoted-string">'assets/js/ajax.js'</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'deps'</span>    <span class="token operator">=></span> <span class="token keyword">array</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'jquery'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'ajax'</span>    <span class="token operator">=></span> <span class="token constant boolean">true</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'params'</span>  <span class="token operator">=></span> <span class="token keyword">array</span><span class="token punctuation">(</span>
			<span class="token string single-quoted-string">'data1'</span>  <span class="token operator">=></span> <span class="token string single-quoted-string">'my_data_1'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'data2'</span>  <span class="token operator">=></span> <span class="token string single-quoted-string">'my_data_2'</span><span class="token punctuation">,</span>
		<span class="token punctuation">)</span>
	<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>åœ¨å‰å°å°±å¯ä»¥çœ‹åˆ°ä»¥ä¸‹çš„è¼¸å‡ºï¼š</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>my_ajax-js-extra<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">var</span> my_ajax <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">"data1"</span><span class="token operator">:</span><span class="token string">"my_data_1"</span><span class="token punctuation">,</span><span class="token string">"data2"</span><span class="token operator">:</span><span class="token string">"my_data_2"</span><span class="token punctuation">,</span><span class="token string">"ajax_url"</span><span class="token operator">:</span><span class="token string">"https:\/\/local.test\/wp-admin\/admin-ajax.php?action=my_ajax"</span><span class="token punctuation">,</span><span class="token string">"ajax_nonce"</span><span class="token operator">:</span><span class="token string">"fead4137e4"</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>æœ€å¾Œåœ¨ JS è£¡é¢å°±å¯ä»¥ç›´æ¥å–å¾—ï¼š</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">$</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> 
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
			<span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
				action<span class="token operator">:</span> <span class="token string">"my_ajax"</span><span class="token punctuation">,</span>
				nonce<span class="token operator">:</span> my_ajax<span class="token punctuation">.</span>ajax_nonce<span class="token punctuation">,</span>
				data1<span class="token operator">:</span> my_ajax<span class="token punctuation">.</span>data1<span class="token punctuation">,</span>
				data2<span class="token operator">:</span> my_ajax<span class="token punctuation">.</span>data2
			<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
			$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
				url<span class="token operator">:</span> my_ajax<span class="token punctuation">.</span>ajax_url<span class="token punctuation">,</span>
				data<span class="token operator">:</span> data<span class="token punctuation">,</span>
				type<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
				dataType<span class="token operator">:</span> <span class="token string">"json"</span><span class="token punctuation">,</span>
				<span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
				<span class="token function-variable function">error</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">&#125;</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> 
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>é€™æ¨£å°±å¯ä»¥çœå»å¯« wp_register_script()ã€wp_localize_script()ã€wp_enqueue_script() çš„éº»ç…©äº†ï¼Œé€éçµ±ä¸€çš„ä»‹é¢ä¾†å®Œæˆ Ajax çš„æª”æ¡ˆå¼•å…¥ã€‚</p>
<h2 id="wp-ajax"><a href="#wp-ajax" class="headerlink" title="wp-ajax"></a>wp-ajax</h2><p>Ajax åœ¨å¤–æ›é–‹ç™¼è£¡é¢é‡åˆ°çš„æ©Ÿç‡ä¸å®šï¼Œä¹Ÿå°±æ˜¯å› ç‚ºä¸ä¸€å®šæ¯æ¬¡éƒ½æœƒç”¨åˆ°ï¼Œç•¶è¦ç”¨çš„æ™‚å€™å°±æœƒå¿˜è¨˜è©²æœ‰çš„æµç¨‹è·Ÿæ­¥é©Ÿï¼š</p>
<ol>
<li>è¨»å†Š JS æª”ä¸¦è¨­å®šè¦å‚³çµ¦å‰ç«¯çš„å¾Œç«¯è®Šæ•¸</li>
<li>è¨»å†Š Ajax çš„å›å‘¼å‡½æ•¸ï¼Œåš Nonce é©—è­‰è·Ÿå–å¾—å‰ç«¯å‚³ä¾†çš„åƒæ•¸å¾Œåšäº‹æƒ…</li>
<li>æŠŠè™•ç†çµæœå›å‚³çµ¦å‰ç«¯</li>
</ol>
<p>æˆ‘å¸¸ç”¨çš„æ˜¯ç”± Anthony Budd çš„ <a target="_blank" rel="noopener" href="https://github.com/anthonybudd/WP_AJAX">WP_AJAX</a>ï¼Œä»–å¯«äº†ä¸€å€‹ WP_AJAX æŠ½è±¡é¡åˆ¥ä¾†è®“æˆ‘å€‘ç¹¼æ‰¿ï¼Œè£¡é¢æœ‰å…§å»ºä¸€äº›å¯¦ç”¨çš„æ–¹æ³•ï¼Œåƒæ˜¯ç”¨ get() å–å¾—å¾å‰ç«¯å‚³ä¾†çš„åƒæ•¸ã€æª¢æŸ¥ä½¿ç”¨è€…æ˜¯å¦ç™»å…¥ã€å–å¾— HTTP è«‹æ±‚æ–¹å¼ç­‰ç­‰ã€‚</p>
<p>å®‰è£æ–¹å¼ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">$ composer require oberonlai&#x2F;wp-ajax<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>åŸºæœ¬ç”¨æ³•å¦‚ä¸‹ï¼š</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">use</span> <span class="token package">ODS<span class="token punctuation">\</span>Ajax</span><span class="token punctuation">;</span>

<span class="token keyword">Class</span> <span class="token class-name">MyAjax</span> <span class="token keyword">extends</span> <span class="token class-name">Ajax</span> <span class="token punctuation">&#123;</span>

    <span class="token keyword">protected</span> <span class="token variable">$action</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'my_ajax'</span><span class="token punctuation">;</span>

    <span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>

    	<span class="token comment">// è¦åšçš„äº‹æƒ…æ”¾é€™é‚Š</span>
    	
    	<span class="token function">update_option</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">,</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token class-name static-context">MyAjax</span><span class="token operator">::</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>å…ˆç¹¼æ‰¿ Ajax é€™å€‹é¡åˆ¥ï¼Œç„¶å¾Œè¨­å®š $action é€™å€‹çµ¦ JS ç”¨çš„è­˜åˆ¥åç¨±ä»¥åŠå¯¦ä½œ run æ–¹æ³•ä¹Ÿå°±æ˜¯å¯¦éš›è¦è™•ç†çš„å‹•ä½œï¼Œæœ€å¾Œå†ç”¨éœæ…‹æ–¹æ³• listen å®Œæˆ Ajax è¨»å†Šå³å¯ã€‚</p>
<p>listen æ–¹æ³•å¸¶æœ‰ä¸€å€‹å¸ƒæ—å€¼åƒæ•¸ï¼Œå¦‚æœè¨­å®šç‚º MyAjax::listen( false ) çš„è©±å‰‡ä»£è¡¨åªæœ‰å·²ç™»å…¥çš„ä½¿ç”¨è€…æ‰èƒ½åŸ·è¡Œé€™å€‹ Ajaxã€‚</p>
<p>æˆ‘å€‘æ­é…ä¸Šé¢çš„ wp-asset å¥—ä»¶ä¾†å¯¦ä½œä½¿ç”¨ Ajax æ›´æ–°æ–‡ç« æ¨™é¡Œï¼š</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">use</span> <span class="token package">ODS<span class="token punctuation">\</span>Asset</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">ODS<span class="token punctuation">\</span>Ajax</span><span class="token punctuation">;</span>

<span class="token class-name static-context">Asset</span><span class="token operator">::</span><span class="token function">addScript</span><span class="token punctuation">(</span>
	<span class="token keyword">array</span><span class="token punctuation">(</span>
		<span class="token string single-quoted-string">'name'</span>    <span class="token operator">=></span> <span class="token string single-quoted-string">'my_ajax'</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'url'</span>     <span class="token operator">=></span> <span class="token constant">ODS_PLUGIN_URL</span> <span class="token operator">.</span> <span class="token string single-quoted-string">'assets/js/ajax.js'</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'deps'</span>    <span class="token operator">=></span> <span class="token keyword">array</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'jquery'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'version'</span> <span class="token operator">=></span> <span class="token constant">ODS_VERSION</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'ajax'</span>    <span class="token operator">=></span> <span class="token constant boolean">true</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'params'</span>  <span class="token operator">=></span> <span class="token keyword">array</span><span class="token punctuation">(</span>
			<span class="token string single-quoted-string">'data1'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'my_data_1'</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'data2'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'my_data_2'</span><span class="token punctuation">,</span>
		<span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyAjax</span> <span class="token keyword">extends</span> <span class="token class-name">Ajax</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">protected</span> <span class="token variable">$action</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'my_ajax'</span><span class="token punctuation">;</span>
	<span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token variable">$nonce</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token function">get</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'nonce'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span> <span class="token function">wp_verify_nonce</span><span class="token punctuation">(</span> <span class="token variable">$nonce</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'my_ajax'</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token variable">$this</span><span class="token operator">-></span><span class="token function">JSONResponse</span><span class="token punctuation">(</span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'ç™¼ç”ŸéŒ¯èª¤ï¼Œä¸åˆæ³•çš„è«‹æ±‚ä¾†æºï¼'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'my-plugin'</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">exit</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
		<span class="token variable">$url</span>     <span class="token operator">=</span> <span class="token function">wp_get_referer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token variable">$post_id</span> <span class="token operator">=</span> <span class="token function">url_to_postid</span><span class="token punctuation">(</span> <span class="token variable">$url</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token variable">$my_post</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
			<span class="token string single-quoted-string">'ID'</span>         <span class="token operator">=></span> <span class="token variable">$post_id</span><span class="token punctuation">,</span>
			<span class="token string single-quoted-string">'post_title'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'This is the 123'</span><span class="token punctuation">,</span>
		<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">wp_update_post</span><span class="token punctuation">(</span> <span class="token variable">$my_post</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token variable">$this</span><span class="token operator">-></span><span class="token function">JSONResponse</span><span class="token punctuation">(</span> <span class="token variable">$post_id</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token class-name static-context">MyAjax</span><span class="token operator">::</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token constant boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>é¦–å…ˆï¼Œæˆ‘å€‘å¯ä»¥ä½¿ç”¨ $this-&gt;get() ä¾†å–å¾—å¾ JS å‚³ä¾†çš„åƒæ•¸ï¼Œåœ¨åšä»»ä½• Ajax çš„å·¥ä½œä¹‹å‰ï¼Œä½¿ç”¨ nonce ä¾†åšè«‹æ±‚ä¾†æºé©—è­‰æ˜¯å¿…è¦çš„ï¼Œæ‰€ä»¥æˆ‘å€‘å…ˆå–å¾—å‰ç«¯å‚³ä¾†çš„ nonceï¼Œç„¶å¾Œç”¨ wp_verify_nonce ä¾†åˆ¤æ–·ã€‚</p>
<p>æ¥ä¸‹ä¾†æŠŠè¦åŸ·è¡Œçš„å·¥ä½œæ”¾åœ¨ run() è£¡é¢ï¼Œé€™é‚Šä½¿ç”¨ wp_update_post åšè³‡æ–™æ›´æ–°ï¼Œæœ€å¾Œç”¨å…§å»ºçš„ JSONResponse æ–¹æ³•æŠŠè™•ç†çµæœå›å‚³çµ¦å‰ç«¯ï¼Œæ³¨æ„åˆ°é€™é‚Šä½¿ç”¨ listen( false ) ä¹Ÿå°±æ˜¯ä»£è¡¨åªæœ‰ç™»å…¥çš„ä½¿ç”¨è€…æ‰èƒ½åŸ·è¡Œé€™å€‹ä¿®æ”¹ã€‚</p>
<p>é€éä»¥ä¸Šå¯«æ³•å¯ä»¥çœç•¥è¦çµ„åˆå‹¾é» wp_ajax_my_ajax èˆ‡ wp_ajax_nopriv_my_ajax é€™å…©å€‹å‹•ä½œï¼Œå†æ­é… wp-asset æ›´èƒ½æ–¹ä¾¿è¼‰å…¥ JS æª”ã€‚</p>
<h2 id="wp-router"><a href="#wp-router" class="headerlink" title="wp-router"></a>wp-router</h2><p>åœ¨é–‹ç™¼å¤–æ›çš„æ™‚å€™å¸¸é‡åˆ°éœ€è¦èƒŒæ™¯å‘¼å«çš„ç‹€æ³ï¼Œåƒæ˜¯ä¸²æ¥ API æ™‚è¦æ¥æ”¶ç¬¬ä¸‰æ–¹å›å‚³çš„è³‡æ–™ï¼Œæˆ–æ˜¯ä¸€äº›ä¸éœ€è¦å‰ç«¯ä»‹é¢çš„è³‡æ–™è™•ç†é ï¼Œä»¥å‰æˆ‘æœƒåœ¨å¾Œå°æ–°å¢é é¢ï¼Œç„¶å¾Œç”¨ page-slug.php çš„ç¯„æœ¬ä¾†å¯«é€™äº›åŠŸèƒ½ï¼Œæˆ–æ˜¯è¨»å†Š REST API çš„ Endpoint ä¾†è™•ç†ï¼Œä½†ä¸ç®¡æ˜¯å“ªå€‹æ–¹æ³•ï¼Œéƒ½æœƒæœ‰å¤šå€‹æ­¥é©Ÿéœ€è¦å»ºç«‹ï¼Œç”¨èµ·ä¾†ä¸æ˜¯é‚£éº¼ç›´è¦ºã€‚</p>
<p>å¾Œä¾†æ‰¾åˆ° Tim Field å¯«çš„ <a target="_blank" rel="noopener" href="https://github.com/tim-field/wordpress-dispatcher">wordpress-dispatcher</a> å¥—ä»¶ï¼Œå¯ä»¥éå¸¸ç›´è¦ºçš„ä¾†æ ¹æ“šç¶²å€åŸ·è¡Œå‡½å¼ï¼Œå®‰è£æ–¹å¼å¦‚ä¸‹ï¼š</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ <span class="token function">composer</span> require oberonlai/wp-router<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>ç„¶å¾Œä½¿ç”¨éœæ…‹æ–¹æ³• routesï¼Œå‚³å…¥æŒ‡å®šçš„é™£åˆ—åƒæ•¸ï¼š</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">use</span> <span class="token package">ODS<span class="token punctuation">\</span>Router</span><span class="token punctuation">;</span>

<span class="token class-name static-context">Router</span><span class="token operator">::</span><span class="token function">routes</span><span class="token punctuation">(</span> 
	<span class="token keyword">array</span> <span class="token punctuation">(</span>
		<span class="token string single-quoted-string">'testing-a-url'</span> <span class="token operator">=></span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
		    <span class="token keyword">echo</span> <span class="token string single-quoted-string">'Hello World'</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>é€™æ¨£ç•¶è¼¸å…¥ç¶²å€ <a target="_blank" rel="noopener" href="https://example.com/testing-a-url">https://example.com/testing-a-url</a> å°±èƒ½çœ‹åˆ°è¼¸å‡ºçš„å…§å®¹ï¼Œç¶²å€è¦å‚³å…¥å‹•æ…‹çš„åƒæ•¸ï¼Œä¹Ÿèƒ½ç”¨æ­£è¦è¡¨é”å¼ä¾†é™å®šå¯å¸¶å…¥çš„åƒæ•¸ï¼š</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">use</span> <span class="token package">ODS<span class="token punctuation">\</span>Router</span><span class="token punctuation">;</span>

<span class="token class-name static-context">Router</span><span class="token operator">::</span><span class="token function">routes</span><span class="token punctuation">(</span> 
	<span class="token keyword">array</span> <span class="token punctuation">(</span>
		<span class="token string single-quoted-string">'hello-([a-z]+)'</span> <span class="token operator">=></span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">,</span> <span class="token variable">$name</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
		    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"Hello <span class="token interpolation"><span class="token variable">$name</span></span>"</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ç•¶è¼¸å…¥ç¶²å€ <a target="_blank" rel="noopener" href="https://example.com/hello-a">https://example.com/hello-a</a> æˆ–æ˜¯ <a target="_blank" rel="noopener" href="https://example.com/hello-b">https://example.com/hello-b</a> ä¸€æ¨£å¯ä»¥è¼¸å‡ºå‡½å¼çš„å…§å®¹ï¼Œé€™å€‹åŒ¿åå‡½å¼å¸¶æœ‰å…©å€‹åƒæ•¸ï¼Œ$request æ˜¯è«‹æ±‚è·¯å¾‘ï¼Œ$name æ˜¯æ‹¬å¼§å…§çš„åƒæ•¸ï¼Œæ‰€ä»¥ä¸Šé¢é€™å€‹ä¾‹å­æœƒè¼¸å‡º Hello a ä»¥åŠ Hello bï¼Œé€™æ¨£å°±èƒ½å¾ˆç›´è¦ºçš„æ ¹æ“šè«‹æ±‚è·¯å¾‘ä¾†åŸ·è¡Œå°æ‡‰çš„ç¨‹å¼ã€‚</p>
<h3 id="åŒå ´åŠ æ˜ ï¼šå¦‚ä½•ä¸Šå‚³è‡ªå·±çš„å¥—ä»¶ï¼Ÿ"><a href="#åŒå ´åŠ æ˜ ï¼šå¦‚ä½•ä¸Šå‚³è‡ªå·±çš„å¥—ä»¶ï¼Ÿ" class="headerlink" title="åŒå ´åŠ æ˜ ï¼šå¦‚ä½•ä¸Šå‚³è‡ªå·±çš„å¥—ä»¶ï¼Ÿ"></a>åŒå ´åŠ æ˜ ï¼šå¦‚ä½•ä¸Šå‚³è‡ªå·±çš„å¥—ä»¶ï¼Ÿ</h3><p>å¦‚æœæ‰¾ä¸åˆ°é©åˆè‡ªå·±çš„å¥—ä»¶è©²æ€éº¼è¾¦ï¼Ÿå¾ˆç°¡å–®ï¼Œå¯«ä¸€å¥—è‡ªå·±çš„æˆ–æ˜¯æ”¹å¯«æ—¢æœ‰çš„å¥—ä»¶ä¾†é”æˆå§ï¼åƒé€™ç¯‡æ–‡ç« è£¡é¢æåˆ°çš„æ‰€æœ‰å¥—ä»¶ï¼Œå…¨éƒ½æ˜¯è¸©åœ¨å¤§å¤§çš„è‚©è†€ä¸Šæ•´ç†å‡ºä¾†çš„ï¼Œè€Œæˆ‘ç¿’æ…£ç”¨è‡ªå·±çš„å‘½åç©ºé–“ä¾†æ–¹ä¾¿å®‰è£ï¼Œå› æ­¤è¤‡è£½åˆ°è‡ªå·±çš„å­˜æ”¾åº«ä¹‹å¾Œå†ä¸Šå‚³åˆ° Packagist å³å¯ã€‚</p>
<p>è¦ä¸Šå‚³ Packagist å¥—ä»¶çš„ Composer è¨­å®šæª”åŸºæœ¬å…§å®¹å¦‚ä¸‹ï¼š</p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>
    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"oberonlai/wp-router"</span><span class="token punctuation">,</span>
    <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Adding router for WordPress."</span><span class="token punctuation">,</span>
    <span class="token property">"homepage"</span><span class="token operator">:</span> <span class="token string">"https://github.com/oberonlai/wp-router"</span><span class="token punctuation">,</span>
    <span class="token property">"license"</span><span class="token operator">:</span> <span class="token string">"MIT"</span><span class="token punctuation">,</span>
    <span class="token property">"authors"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span>
            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Oberon Lai"</span><span class="token punctuation">,</span>
            <span class="token property">"email"</span><span class="token operator">:</span> <span class="token string">"m615926@gmail.com"</span><span class="token punctuation">,</span>
            <span class="token property">"homepage"</span><span class="token operator">:</span> <span class="token string">"https://oberonlai.blog"</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">"minimum-stability"</span><span class="token operator">:</span> <span class="token string">"stable"</span><span class="token punctuation">,</span>
    <span class="token property">"require"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token property">"php"</span><span class="token operator">:</span> <span class="token string">">=7.2"</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token property">"autoload"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token property">"psr-4"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
            <span class="token property">"ODS\\"</span><span class="token operator">:</span> <span class="token string">"src/"</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æœ‰å…©å€‹åœ°æ–¹éœ€è¦æ³¨æ„ï¼šç¬¬ä¸€å€‹æ˜¯ä¸è¦æ”¾å…¥ version ç‰ˆæœ¬è™Ÿçš„åƒæ•¸ï¼Œå› ç‚º Packagist æ˜¯ç”¨ Github çš„ tag ä¾†åˆ¤æ–·ç‰ˆæœ¬ï¼Œå¦‚æœ composer.json è£¡é¢åŒ…å« version æœƒç™¼ç”ŸéŒ¯äº‚ã€‚</p>
<p>ç¬¬äºŒå€‹é—œéµæ˜¯ autoloadï¼Œæˆ‘çš„å‘½åç©ºé–“çµ±ä¸€ä½¿ç”¨ ODS ( Oberon Design System )ï¼Œç„¶å¾Œè‡ªå‹•è¼‰å…¥ src è³‡æ–™å¤¾è£¡é¢çš„æª”æ¡ˆï¼Œæ‰€ä»¥ä¹‹å¾Œè¦ç”¨çš„æ™‚å€™åªè¦å¯« use ODS\é¡åˆ¥åç¨± å³å¯ã€‚</p>
<p>æˆ‘æ…£ç”¨çš„ç‰ˆæœ¬æ§ç®¡æ˜¯ Githubï¼Œæ‰€ä»¥æº–å‚™å¥½å¥—ä»¶è·Ÿå‘½åç©ºé–“å¾Œå°±å¯ä»¥æ¨ä¸Šå»äº†ï¼Œæ¥ä¸‹ä¾†å‰å¾€ Packagist è¨»å†Šä¸€å€‹å¸³è™Ÿï¼Œè¨»å†Šå®Œæˆå¾Œå°±èƒ½æäº¤è‡ªå·±çš„å¥—ä»¶ï¼š</p>
<p><img src="https://oberonlai.blog/wp-content/uploads/wordpress-and-composer/wordpress-and-composer-12.jpg"></p>
<p>ç›´æ¥åœ¨ Repository URL è²¼å…¥ä½ çš„ Github å­˜æ”¾åº«ç¶²å€å³å¯ï¼ŒæŒ‰ä¸‹ Check å¾Œä»–æœƒæé†’ä½ æœ‰å…¶ä»–é¡ä¼¼åç¨±çš„å¥—ä»¶ï¼Œç›´æ¥ Submit å¾Œå°±å®Œæˆäº†ã€‚</p>
<p>å¦‚æœä¹‹å¾Œç™¼ç¾å¥—ä»¶æœ‰åœ°æ–¹éœ€è¦ä¿®æ”¹ï¼Œä¿®æ”¹å®Œå¾Œä¸€æ¨£ç›´æ¥å…ˆæ¨ä¸Š Githubï¼Œå› ç‚º Packagist æ˜¯ç”¨ tag ä¾†æŠ“ç‰ˆæœ¬è³‡è¨Šï¼Œæ‰€ä»¥æˆ‘å€‘å…ˆæŠŠä¿®æ”¹å¾Œçš„ commit å»ºç«‹ä¸€å€‹æ–°çš„ tagï¼š</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">git</span> tag -a <span class="token string">'v1.0.1'</span> -m <span class="token string">'é€™æ¬¡æ”¹çš„æ±è¥¿'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>å†æŠŠé€™å€‹ tag æ¨ä¸Šå»ï¼š</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php">git push origin v1<span class="token operator">.</span><span class="token number">0.1</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>é€™æ¨£åœ¨ Packagist å°±èƒ½æ¥æ”¶åˆ°æ›´æ–°ç‰ˆæœ¬çš„è³‡è¨Šäº†ï¼Œç‰ˆæœ¬è™Ÿçš„å‘½åæ…£ä¾‹æ˜¯ v1.0.x æ˜¯é™¤éŒ¯ã€å®‰å…¨æ€§ä¿®æ”¹ã€v1.x.0 æ˜¯æ–°å¢åŠŸèƒ½ã€vX.0.0 æ˜¯åŒ…å«ç›¸å®¹æ€§å•é¡Œçš„å¤§ç‰ˆæœ¬æ›´æ–°ï¼Œé€™æ¨£å°±èƒ½è®“ä½¿ç”¨è€…çŸ¥é“é€™æ¬¡æ›´æ–°çš„è¦æ¨¡å¤§å°ï¼Œä»¥ä¾¿è®“ä»–å€‘è‡ªè¡Œæ±ºå®šæ˜¯å¦è¦æ›´æ–°ã€‚</p>
<br>

<h2 id="å°çµ"><a href="#å°çµ" class="headerlink" title="å°çµ"></a>å°çµ</h2><p>é€éæ—¢æœ‰çš„å¥—ä»¶ä¾†é–‹ç™¼å¤–æ›å¯ä»¥å¤§å¹…æå‡å·¥ä½œæ•ˆç‡ï¼Œä½†å¦‚æœæ˜¯å·²ç¶“ç†Ÿæ‚‰ WordPress API çš„æœ‹å‹ï¼Œå¯èƒ½æœƒéœ€è¦èŠ±ä¸€é»æ™‚é–“ä¾†é©æ‡‰é€™æ¨£çš„é–‹ç™¼æ¨¡å¼ï¼Œå› ç‚ºæˆ‘ä¸€é–‹å§‹ä¹Ÿä¸å¤ªç¿’æ…£ï¼Œç›´åˆ°å¾Œä¾†æ±ºå®šæŠŠå¤–æ›ä»¥ç‰©ä»¶å°å‘çš„æ¨¡å¼ä¾†é–‹ç™¼ï¼Œæ‰é©šè¦ºåˆ°é€™æ¨£çš„ä½œæ³•æ‰èƒ½è®“ç¨‹å¼ç¢¼æ˜“æ–¼ç¶­è­·èˆ‡é‡è¤‡åˆ©ç”¨ï¼Œä»¥åŠçµ„åˆä¸åŒçš„ç‰©ä»¶ä¾†å®Œæˆä»»å‹™ã€‚</p>
<p>è€Œé€™æ¨£çš„å¥½è™•æ˜¯å¯ä»¥è®“ç¨‹å¼æ›´æ˜“æ–¼è¢«æ¸¬è©¦ï¼Œé¿å…æ”¹æ±ç‰†å£è¥¿ç‰†çš„æƒ…æ³ä¸€å†ç™¼ç”Ÿã€‚æ¥ä¸‹ä¾†ï¼Œæˆ‘å€‘æŠŠé€™æ¨£çš„è¨­è¨ˆæ¨¡å¼è¡ä¼¸åˆ°å‰ç«¯é–‹ç™¼ï¼Œä¸‹ä¸€ç¯‡æ–‡ç« å°‡ä»‹ç´¹å¦‚ä½•åœ¨å¤–æ›è£¡é¢ä½¿ç”¨ç¯„æœ¬æª”ä¿®æ”¹å‰ç«¯ä»‹é¢ä¸¦æ•´åˆå‰ç«¯é–‹ç™¼æµç¨‹ï¼Œå¦å¤–è·Ÿé¢¨ä¸€ä¸‹æœ€è¿‘å¾ˆç´…çš„ TailwindCSSï¼Œè®“å¾Œç«¯å¯ä»¥ç„¡ç—›æ‰‹åˆ» UI ~</p>

    </div>

    
    
    

      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tw/tags/composer/" rel="tag"><i class="fa fa-tag"></i> composer</a>
              <a href="/tw/tags/customPostType/" rel="tag"><i class="fa fa-tag"></i> customPostType</a>
              <a href="/tw/tags/metabox/" rel="tag"><i class="fa fa-tag"></i> metabox</a>
              <a href="/tw/tags/option/" rel="tag"><i class="fa fa-tag"></i> option</a>
              <a href="/tw/tags/asset/" rel="tag"><i class="fa fa-tag"></i> asset</a>
              <a href="/tw/tags/ajax/" rel="tag"><i class="fa fa-tag"></i> ajax</a>
              <a href="/tw/tags/router/" rel="tag"><i class="fa fa-tag"></i> router</a>
              <a href="/tw/tags/packagist/" rel="tag"><i class="fa fa-tag"></i> packagist</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/tw/wordpress-plugin-boilerplate/" rel="prev" title="ã€ å¿ƒå¾— ã€‘WordPress å¤–æ›é–‹ç™¼æ—¥è¨˜ (ä¸€) - æ¶æ§‹">
      <i class="fa fa-chevron-left"></i> ã€ å¿ƒå¾— ã€‘WordPress å¤–æ›é–‹ç™¼æ—¥è¨˜ (ä¸€) - æ¶æ§‹
    </a></div>
      <div class="post-nav-item">
    <a href="/tw/wordpress-line-bot-plugin/" rel="next" title="WordPress LINE Bot èŠå¤©æ©Ÿå™¨äººå¤–æ›">
      WordPress LINE Bot èŠå¤©æ©Ÿå™¨äººå¤–æ› <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    
  <div class="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®éŒ„
        </li>
        <li class="sidebar-nav-overview">
          æœ¬ç«™æ¦‚è¦
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="è³´ä¿Šå¾ / Oberon Lai"
      src="/tw/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">è³´ä¿Šå¾ / Oberon Lai</p>
  <div class="site-description" itemprop="description">ç¾ç‚ºå…¨è· WordPress å·¥ç¨‹å¸«ï¼Œç¶²ç«™é–‹ç™¼ç¶“æ­· 11 å¹´ï¼Œå°ˆæ”»å‰ç«¯å·¥ç¨‹èˆ‡ WordPress ä½ˆæ™¯ä¸»é¡Œã€å¤–æ›å®¢è£½åŒ–é–‹ç™¼</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/tw/archives">
          <span class="site-state-item-count">258</span>
          <span class="site-state-item-name">æ–‡ç« </span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/tw/categories/">
        <span class="site-state-item-count">38</span>
        <span class="site-state-item-name">åˆ†é¡</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tw/tags/">
        <span class="site-state-item-count">80</span>
        <span class="site-state-item-name">æ¨™ç±¤</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/oberonlai" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;oberonlai" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:m615926@gmail.com" title="E-Mail â†’ mailto:m615926@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/oberonlai" title="Twitter â†’ https:&#x2F;&#x2F;twitter.com&#x2F;oberonlai" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.facebook.com/m615926" title="FB Page â†’ https:&#x2F;&#x2F;www.facebook.com&#x2F;m615926" rel="noopener" target="_blank"><i class="fab fa-facebook fa-fw"></i>FB Page</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">è³´ä¿Šå¾ / Oberon Lai</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="ç¸½å­—æ•¸">599k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="æ‰€éœ€ç¸½é–±è®€æ™‚é–“">9:05</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> å¼·åŠ›é©…å‹•
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/tw/lib/anime.min.js"></script>
  <script src="/tw/lib/pjax/pjax.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/medium-zoom@1/dist/medium-zoom.min.js"></script>

<script src="/tw/js/utils.js"></script>


<script src="/tw/js/schemes/muse.js"></script>


<script src="/tw/js/next-boot.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  




  
<script src="/tw/js/local-search.js"></script>













    <div id="pjax">
  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://oberon-lai.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  var disqus_config = function() {
    this.page.url = "https://oberonlai.blog/tw/wordpress-and-composer/";
    this.page.identifier = "wordpress-and-composer/";
    this.page.title = "ã€ å¿ƒå¾— ã€‘WordPress å¤–æ›é–‹ç™¼æ—¥è¨˜ (äºŒ) - å¥—ä»¶";
    };
  NexT.utils.loadComments(document.querySelector('#disqus_thread'), () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: disqus_config
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://oberon-lai.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });
</script>

    </div>
</body>
</html>
